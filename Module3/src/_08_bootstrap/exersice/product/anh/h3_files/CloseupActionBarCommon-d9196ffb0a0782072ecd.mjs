(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["CloseupActionBarCommon"],{"3vRR":function(e,t,n){var i=n("nKUr"),o=(n("q1tI"),n("n6mq"));t.a=({children:e})=>Object(i.jsx)(o.e,{width:"100%",role:"list",children:e})},"6wCo":function(e,t,n){var i=n("nKUr"),o=n("q1tI"),r=n("JW66"),s=n("ENn1"),a=n("ynlw"),c=n("Hrat"),l=n("/MKj"),d=n("Ye/N"),p=n("TgLd"),u=n("GBVV"),h=n("4cpq"),m=n("M1Uz"),b=n("eOdZ");var j=n("U4JR"),f=n("nGHF"),g=n("n6mq");var y=Object(l.connect)(null,e=>({deletePinSponsorship:t=>e(function(e){return async t=>{await b.a.create("SponsoredPinResource",{pinId:e}).callDelete(),t(function(e){return{type:"DELETE_PIN_SPONSORSHIP",payload:{pinId:e}}}(e))}}(t))}))((function({deletePinSponsorship:e,onDeletePinSponsorship:t,onDismiss:n,pinId:r}){const{showOneToast:s}=Object(f.b)(),[a,c]=Object(o.useState)(!1),l=e=>{c(!1),Object(j.b)(101,{view:3,element:12114,component:230,pin_id:r}),s(({onHide:t})=>Object(i.jsx)(m.a,{onHide:t,text:e?d.a._("Something went wrong!","closeup.pinActionDropdown.toastAfterDeletingHasErrors","Pinterest ran into errors while deleting paid sponsorship"):d.a._("Removed!","closeup.pinActionDropdown.toastAfterDeleting","User deleted their paid partnership")}))};return Object(i.jsx)(p.b,{heading:d.a._("Remove paid partnership?","closeup.pinActionDropdown.deletePinSponsorshipModalHeading","Heading for modal that confirms user wants to delete their partnership"),accessibilityModalLabel:d.a._("Remove paid partnership?","closeup.pinActionDropdown.deletePinSponsorshipModalHeadingLabel","Heading for modal that confirms user wants to delete their partnership"),size:"sm",onDismiss:n,footer:Object(i.jsxs)(g.e,{display:"flex",justifyContent:"center",marginStart:-1,marginEnd:-1,children:[Object(i.jsx)(g.e,{paddingX:1,children:Object(i.jsx)(g.f,{onClick:n,text:d.a._("Cancel","closeup.pinActionDropdown.deletePinSponsorshipModalCancel","Button label for closing sponsorship removal modal")})}),Object(i.jsx)(g.e,{paddingX:1,children:Object(i.jsx)(h.a,{id:"confirm-delete-pin-sponsorship",children:Object(i.jsx)(u.b,{color:"red",onClick:()=>{(async()=>{if(!a){c(!0);try{await e(r),t(),l()}catch(n){t(),l(n)}}})()},text:d.a._("Remove","closeup.pinActionDropdown.deletePinSponsorshipModalConfirmButton","Button label for removing sponsorship"),submitting:a})})})]}),children:Object(i.jsx)(g.e,{padding:4,children:Object(i.jsx)(g.U,{align:"center",children:d.a._("This will remove the paid partnership disclosure on this Pin—if you change your mind you’ll have to start again! This won’t delete the Pin or affect who sees it.","closeup.pinActionDropdown.deletePinSponsorshipDescription","Text description for modal that confirms user wants to delete their sponsorship")})})})})),x=n("E/VT"),O=n("7w6Q"),w=n("tkfL");const _=()=>O.a.increment("windows.download.blob.error"),S=(e,t,n)=>{const i=new window.Windows.Storage.Pickers.FileSavePicker;i.suggestedStartLocation=window.Windows.Storage.Pickers.PickerLocationId.picturesLibrary;const{extension:o,extensionName:r,name:s}=(e=>{const t=e.split("/"),n=t[t.length-1],i=n.split(".");if(i.length>1){const e=i.pop();return{extension:"."+e,extensionName:e.toUpperCase(),name:i.join()}}return{extension:".",extensionName:d.a._("Unknown","Label for file picker drop down when the file type is not known","Label for file picker drop down when the file type is not known"),name:n}})(t);i.suggestedFileName=n||s,i.fileTypeChoices.insert(r,[o]),i.pickSaveFileAsync().then(t=>{t&&(window.Windows.Storage.CachedFileManager.deferUpdates(t),t.openAsync(window.Windows.Storage.FileAccessMode.readWrite).then(t=>{const n=e.msDetachStream();window.Windows.Storage.Streams.RandomAccessStream.copyAsync(n,t).then(()=>{t.flushAsync().done(()=>{n.close(),t.close(),O.a.increment("windows.download.blob.success")},_)},_)},_))})};var v=({filename:e,imgSrc:t,category:n})=>{if(!t)return null;return Object(i.jsx)(w.b,{onClick:()=>{((e,t)=>{try{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onreadystatechange=()=>{if(4===n.readyState)if(200!==n.status)O.a.increment("windows.download.blob.nodownload",.1,{status:n.status});else{const i=n.response;S(i,e,t)}},n.send(null)}catch(n){O.a.increment("windows.download.blob.xhrexception",.1,{error:n})}})(t,e)},text:d.a._("Download image","Button to download Pin image","Button to download Pin image")})},C=n("ESls"),R=n("kmwA");function T(e){const{onDismiss:t,myPin:n}=e,[r,s]=Object(o.useState)(1),a=[{label:d.a._("Small","pinActionDropdown.GetEmbedCodeModal.small","Label on segmented controller for pin embed code, for small width"),width:236},{label:d.a._("Medium","pinActionDropdown.GetEmbedCodeModal.medium","Label on segmented controller for pin embed code, for medium width"),width:345},{label:d.a._("Large","pinActionDropdown.GetEmbedCodeModal.large","Label on segmented controller for pin embed code, for large width"),width:450},{label:d.a._("Extra Large","pinActionDropdown.GetEmbedCodeModal.extra_large","Label on segmented controller for pin embed code, for extra-large width"),width:600}];return Object(i.jsx)(g.y,{children:Object(i.jsxs)(p.b,{accessibilityModalLabel:d.a._("Get Embed Code","pinActionDropdown.GetEmbedCodeModal.modalLabel","Accessibility label on modal for pin embed code"),heading:d.a._("Get Embed Code","pinActionDropdown.GetEmbedCodeModal.header","Heading on modal for pin embed code"),onDismiss:t,footer:Object(i.jsx)(g.e,{display:"flex",direction:"row",justifyContent:"end",children:Object(i.jsx)(g.f,{size:"sm",text:d.a._("Got it!","pinActionDropdown.GetEmbedCodeModal.dismissButton","Button to dismiss embed code modal"),onClick:t})}),children:[Object(i.jsx)(g.e,{paddingX:6,paddingY:4,children:Object(i.jsx)(g.L,{items:a.map(e=>e.label),selectedItemIndex:r,onChange:({activeIndex:e})=>{s(e)}})}),Object(i.jsx)(g.e,{paddingX:8,paddingY:6,children:Object(i.jsx)("code",{children:`<iframe src="${R.a.settings.ASSETS_SITE_URL}/ext/embed.html?id=${n.id}" height="${Math.ceil(n.height*a[r].width/n.width+100)}" width="${a[r].width}" frameborder="0" scrolling="no" ></iframe>`})})]})})}var I=n("gTC0"),P=n("hFNL"),D=n("LT60"),k=n("v/Q4"),E=n("CONZ"),B=n("eUcp"),A=n("aOj9");var L=Object(l.connect)(e=>({isFullAuth:e.viewer.isAuth&&!e.viewer.isLimitedLogin}),e=>({deletePinMention:t=>e(Object(E.b)(t))}))((function({bestPinImgSrc:e,deletePinMention:t,embedImg:n,hideDownload:r,showEmbed:s,isFullAuth:a,onDropdownClick:c,onReportPin:l,onToggle:p,pinCategory:u,pinDescription:h,pinId:b,pinImgSrc:O,pinTitle:_,reportPin:S,showRemoveMention:R,showRemoveSponsorship:E,usePortal:L}){const{showOneToast:M}=Object(f.b)(),[H,U]=Object(o.useState)(!1),[F,z]=Object(o.useState)(!1),[Y,q]=Object(o.useState)(!1),N=Object(k.a)(),X=Object(A.e)(),G=Object(o.useRef)(),W=()=>{U(!1)},K=()=>{t(b),N.isAuth&&Object(j.b)(8909,{element:116,tag_id:N.id,tag_type:1,view:3}),W(),M(({onHide:e})=>Object(i.jsx)(m.a,{onHide:e,text:d.a._("@mention removed!","closeup.pinActionDropDown.mentionRemovalToast","Toast that tells user that they have successfully removed the @mention of them in another user's Pin description")}))},V=()=>{W(),q(!Y)},$=()=>{F||Object(j.b)(4439,{view:3,viewParameter:156}),U(!1),z(!F)},J=()=>{"function"==typeof l&&l(b),S()},Z=d.a._("More options","Accessible label for more options dropdown","Accessible label for more options dropdown");return Object(i.jsxs)(g.e,{flex:"grow",alignItems:"center",display:"flex",children:[Object(i.jsx)(g.e,{ref:G,children:Object(i.jsx)(I.a,{accessibilityLabel:Z,icon:"ellipsis",onClick:()=>{var e;p&&p(),"function"==typeof c&&c(),U(!H),e=981,Object(j.b)(101,{element:e,component:4,view:3,viewParameter:139})}})}),H&&(()=>{const t=Object(i.jsx)(g.e,{zIndex:B.a,children:Object(i.jsx)(g.r,{anchor:G.current,idealDirection:"down",onDismiss:W,size:"xs",children:Object(i.jsxs)(w.a,{children:[!r&&"undefined"!=typeof window&&"windows"!==Object(P.b)(window)&&e&&Object(i.jsx)(x.a,{imgSrc:e||"",filename:_||h,category:u,pinId:b,children:e=>Object(i.jsx)(w.b,{onClick:e,text:d.a._("Download image","Button to download Pin image","Button to download Pin image")})}),!r&&"undefined"!=typeof window&&"windows"===Object(P.b)(window)&&(e||O)&&Object(i.jsx)(v,{imgSrc:e||O||"",filename:_||h,category:u}),E&&Object(i.jsx)(w.b,{onClick:V,text:d.a._("Remove partnership","closeup.pinActionDropDown.removePartnership","Label to allow removing an existing partnership")}),Object(i.jsx)(w.b,{onClick:a?J:X,text:d.a._("Report Pin","Label for report pin action","Label for report pin action")}),R&&Object(i.jsx)(w.b,{onClick:K,text:d.a._("Remove @mention","closeup.pinActionDropDown.removeMention","Button that allows user to remove their @mention in the pin's")}),s&&Object(i.jsx)(C.a,{name:"closeup_pin_embed_code",children:({anyEnabled:e})=>e&&Object(i.jsx)(w.b,{onClick:$,text:d.a._("Get Pin embed code","Label for embed pin action","Label for embed pin action")})})]})})});return L?Object(i.jsx)(D.a,{children:Object(i.jsx)(g.y,{children:t})}):t})(),F&&Object(i.jsx)(T,{myPin:{id:b,height:n.height,width:n.width},onDismiss:$}),Y&&Object(i.jsx)(y,{onDeletePinSponsorship:V,onDismiss:V,pinId:b})]})})),M=n("QAzJ"),H=n("YxyV"),U=n("7jH2");t.a=({onDropdownClick:e,onReportPin:t,pin:n,viewParameter:o})=>{var l;const d=Object(k.a)(),{pinTitle:p,pinDescription:u,pinCategory:h}=Object(c.a)(n),m=Object(U.p)({pin:n}),{video:b}=Object(U.x)(m)||{},j=!!b;let f;n.images&&(f=n.embed&&"gif"===n.embed.type?n.embed.src:n.images["736x"]&&n.images["736x"].url);const y=!!n.story_pin_data_id,x=Object(H.d)(n),{isPromoted:O}=Object(a.a)(n),w=n.board.privacy===r.a.BoardPrivacy.SECRET,_=!O&&!w,S=d.isAuth&&(null===(l=n.user_mention_tags)||void 0===l?void 0:l.filter(e=>e.object_id===d.id).length)>0,{sponsorship:v}=n,{creator:C,sponsor:R}=v||{},T=d.isAuth&&!!v&&[C.username,R.username].includes(d.username),{anyEnabled:I}=Object(M.a)("mweb_web_sponsored_pins",T);return Object(i.jsx)(g.e,{"data-test-id":"pin-action-bar",children:Object(i.jsx)(L,{embedImg:Object(H.e)(n,"736x"),showEmbed:_,bestPinImgSrc:x,hideDownload:j||y,onDropdownClick:e,onReportPin:t,pinCategory:h,pinDescription:u,pinId:n.id,pinImgSrc:f,pinTitle:p,reportPin:Object(s.a)({pin:n,viewParameter:o,viewType:3}),showRemoveMention:S,showRemoveSponsorship:T&&I,usePortal:!1})})}},Hrat:function(e,t,n){var i=n("yaUg"),o=n("Ye/N");t.a=e=>{const t=e.link_domain||{},n=e.tracked_link||e.link||e.images&&e.images.orig&&e.images.orig.url,r=e.rich_metadata,s=e.domain,a=e.closeup_attribution||e.native_creator||t.official_user||e.pinner||e.origin_pinner,c=!(!(r&&r.recipe&&r.recipe.name&&r.recipe.categorized_ingredients)||r.recipe.from_aggregated_data);let l,d;r&&r.products&&r.products[0]&&(l=!!(r&&r.name&&r.offer_summary));const p=e.buyable_product,u=l||p,h=!(!r||!r.article),m=!(!r||!r.tutorial),b=!(!a||!a.username);let j=o.a._("Saved from ","Closeup pin annotation","Closeup pin annotation"),f=b?o.a._("Saved by"):o.a._("Saved from"),g=o.a._("Visit");r&&r.products&&r.products[0]&&r&&r.products[0].name&&r.products[0].offer_summary&&(j=o.a._("Product sold by ","pin annotation","pin annotation"),d=r.products[0].offer_summary),u?(f=o.a._("Sold by"),g=o.a._("Visit")):m?(j=o.a._("Saved from ","pin annotation","pin annotation"),f=b?o.a._("Saved by"):o.a._("Saved from"),g=o.a._("Visit")):c?(j=o.a._("Recipe from ","pin annotation","pin annotation"),f=b?o.a._("Recipe by"):o.a._("Recipe from"),g=o.a._("Make it")):h&&(j=o.a._("Article from ","pin annotation","pin annotation"),f=b?o.a._("Article by"):o.a._("Article from"),g=o.a._("Read it"));const y=e.rich_summary;if(!d&&y){let e;y&&y.products&&y.products[0]&&(e=!!(y&&y.products[0].name&&y.products[0].offer_summary),e&&(j=o.a._("Product sold by ","pin annotation","pin annotation")))}let x,O;b?(x="/"+a.username+"/",O=a.full_name):(x="/source/"+s,O=r&&r.site_name||s);return{actionButtonText:g,image:a&&(a.image_medium_url||a.image_small_url)||e.board&&e.board.image_thumbnail_url,link:x,pinLink:n,pin:e,pinCreditPrefix:j,prefixText:f,subtitle:O,title:Object(i.a)(o.a._("More from {{ subtitle }}"),{subtitle:O}),pinTitle:e.closeup_unified_title,pinDescription:e.closeup_unified_description,pinCategory:e.category}}},OPV1:function(e,t,n){var i=n("nKUr"),o=(n("q1tI"),n("Ye/N")),r=n("gTC0"),s=n("4cpq"),a=n("dtqy");t.a=Object(a.a)(({handlePinEditButtonClick:e})=>Object(i.jsx)(s.a,{id:"closeup-pin-edit-button",children:Object(i.jsx)(r.a,{accessibilityLabel:o.a._("Edit","edit button on pin","edit button on pin"),onClick:t=>e&&e(t),icon:"edit"})}))},Pus6:function(e,t,n){var i=n("nKUr"),o=(n("q1tI"),n("R6wO")),r=n("qD10"),s=n("n6mq");t.a=({bold:e,description:t,descriptionColor:n,external:a,hasDividerAfter:c,icon:l,onClick:d,text:p,url:u})=>{const h=Object(i.jsx)(s.e,{role:"listitem",overflow:"hidden",children:Object(i.jsx)(o.a,{bold:e,description:t,descriptionColor:n,icon:l,text:p})});return Object(i.jsxs)(s.e,{children:[u?Object(i.jsx)(r.a,{to:u,external:a,onClick:d,children:h}):Object(i.jsx)(s.T,{fullWidth:!1,onTap:d,children:h}),c&&Object(i.jsx)(s.o,{})]})}},qlIy:function(e,t,n){n.r(t),n.d(t,"CloseupActionBar",(function(){return M}));var i=n("nKUr"),o=n("q1tI"),r=n.n(o),s=n("OPV1"),a=n("6wCo"),c=n("c4Fo"),l=n("n6mq");class d extends r.a.Component{constructor(...e){var t,n,i;super(...e),i={paused:!1,showPulsar:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this.mountPulsar(),this.props.onExperienceMount&&this.experience&&this.props.onExperienceMount(this.experience)}componentWillUnmount(){clearTimeout(this.timer)}mountPulsar(){if(!this.experience)return;const{display_data:e}=this.experience;e.has_pulsar&&this.setState({showPulsar:!0})}renderPulsar(){const{anchor:e}=this.props,{paused:t}=this.state;if(!e)return null;const n=e.getBoundingClientRect(),{height:o,width:r}=n,s=-(68+o/2),a=-(68-r/2);return Object(i.jsx)(l.e,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:1,marginTop:s,marginLeft:a,cursor:"pointer",pointerEvents:"none"}},children:Object(i.jsx)(l.H,{paused:t})})}renderFlyout(e){const{anchor:t,flyoutSize:n,idealDirection:o,textOverflow:r}=this.props;return Object(i.jsx)(l.r,{anchor:t,color:"blue",idealDirection:o||"down",onDismiss:()=>{},shouldFocus:!1,showCaret:!0,size:n,children:Object(i.jsx)(l.e,{column:12,padding:3,children:Object(i.jsx)(l.U,{color:"white",overflow:r,weight:"bold",children:e})})})}render(){const{experienceIds:e,placementId:t,shouldTimeoutDismiss:n}=this.props,{showPulsar:o}=this.state;return Object(i.jsx)(c.a,{experienceIds:e,placementId:t,type:8,children:e=>{const{complete:t,dismiss:r,display_data:s}=e;return this.experience=e,s.has_pulsar||s.has_tooltip?(n&&s.disappearTime&&s.disappearTime>0&&(this.timer=setTimeout(()=>(r(),null),s.disappearTime)),Object(i.jsxs)(l.e,{dangerouslySetInlineStyle:{__style:{zIndex:10}},children:[o&&this.renderPulsar(),s.has_tooltip&&(!s.has_pulsar||this.state.paused)&&this.renderFlyout(s.text)]})):(t(),null)}})}}var p=n("/MKj"),u=n("1Vso");const h="cubic-bezier(0, 0, 0.58, 1)",m={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:h,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:h,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function b({reactionLabel:e,handleHideConfirmation:t}){const[n,r]=Object(o.useState)("loaded"),s=Object(o.useRef)();return Object(o.useEffect)(()=>{let e=null,n=null;return s.current=requestAnimationFrame(()=>{e=setTimeout(()=>r("fade"),1e3),n=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(n)}},[]),Object(i.jsx)(l.e,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",children:Object(i.jsx)(l.e,{rounding:"pill",position:"absolute",color:"darkGray",ref:s,height:20,display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2,dangerouslySetInlineStyle:{__style:{...m[n],whiteSpace:"nowrap"}},children:Object(i.jsx)(l.U,{color:"white",size:"sm",weight:"bold",overflow:"normal",children:e})})})}var j=n("ihsa"),f=n("eo+c");const g=40,y={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:"translateY(-30px) scaleX(1.6) scaleY(1.6)",transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:"scale(0.625)",transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},x={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function O({reactionButtonRect:e,handleReactionTrayClick:t}){const[n,r]=Object(o.useState)("loading"),[s,a]=Object(o.useState)(""),[c,d]=Object(o.useState)(),[p,u]=Object(o.useState)(!1),[h,m]=Object(o.useState)({}),[b]=Object(o.useState)(e),O=Object(o.useRef)(),w=Object(o.useRef)({});Object(o.useEffect)(()=>{"loading"===n&&(O.current=requestAnimationFrame(()=>r("loaded"))),(()=>{u(!0);const e={...h};f.c.forEach(t=>{w.current[t]&&!e[t]&&(e[t]=w.current[t].getBoundingClientRect())}),Object.keys(e).length===f.c.length&&m(e)})(),!c&&p&&(()=>{const e={...c};f.c.forEach(t=>{const n=h[t],{left:i,top:o}=b,{left:r,top:s}=n,a=i-r-8,c=o-s+9;e[t]={translateX:a,translateY:c}}),d(e)})()},[p,e]);const _=()=>{"clicked"===n&&s&&(r("flying"),setTimeout(()=>{t(s)},750))},S=f.c.map((e,t)=>{const{staticAsset:o,animatedAsset:r,label:a,htmlStyle:d,animationStyle:p}=Object(f.a)(e),u={transitionDelay:.08*t+"s",...y[n]},h={...s===e?y.clicked:y.loaded},m={...c&&s===e?{transform:`translateZ(0) translateX(${c[e].translateX}px) translateY(${c[e].translateY}px) scaleX(0.6) scaleY(0.6) `,...y[n]}:y.fading};let b={};return"loading"===n||"loaded"===n?b={...u}:"clicked"===n?b={...h}:"flying"===n&&(b={...m}),Object(i.jsx)(l.e,{display:"flex",alignSelf:"center",justifyContent:"between",children:Object(i.jsxs)(l.e,{maxHeight:g,maxWidth:g,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",dangerouslySetInlineStyle:{__style:{...b}},ref:t=>{w.current[e]=t},children:[s!==e&&Object(i.jsx)(l.e,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:Object(i.jsx)(l.e,{width:g,height:g,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${o})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})}),Object(i.jsxs)(l.e,{display:"flex",alignItems:"center",justifyContent:"center",direction:"column",position:"relative",children:[Object(i.jsx)(j.a,{unsafeCSS:d}),s===e&&"clicked"===n&&Object(i.jsx)(l.e,{rounding:"pill",color:"darkGray",height:20,dangerouslySetInlineStyle:{__style:y.label},display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2,children:Object(i.jsx)(l.U,{color:"white",size:"sm",weight:"bold",overflow:"normal",children:a})}),Object(i.jsx)("div",{onClick:_,onKeyDown:_,role:"presentation",children:Object(i.jsx)(l.e,{width:g,height:g,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{...y.icon,...s===e&&"clicked"===n?{animation:p}:{},backgroundImage:`url(${r})`}}})})]})]})},t)});return Object(i.jsx)(l.e,{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{marginLeft:-150}},children:Object(i.jsx)(l.e,{display:"flex",alignItems:"center",justifyContent:"center",width:300,height:80,rounding:"pill",color:"flying"===n?"transparent":"white",dangerouslySetInlineStyle:{__style:{..."flying"!==n?x:{}}},onMouseMove:e=>{const{clientX:t}=e;if("flying"!==n){const e=(e=>{let t;return p&&f.c.forEach(n=>{const i=h[n];if(i&&i.left&&i.right){const{left:o,right:r}=i;e>=o&&e<=r&&(t=n)}}),t||null})(t);e!==s&&a(e),r("clicked")}},children:Object(i.jsx)(l.e,{display:"flex",alignItems:"center",justifyContent:"around",width:"100%",paddingX:5,children:S})})})}var w=n("eOdZ");var _=n("U4JR");function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v={borderRadius:"50%"},C={backgroundColor:"rgb(226, 226, 226)"},R={backgroundColor:"rgb(218, 218, 218)"},T={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0};class I extends o.PureComponent{constructor(...e){super(...e),S(this,"state",{clickedReaction:0,isConfirmationShowing:!1,isReactionTrayShowing:!1,reactionButtonRect:null,useInitialReaction:!0,isHoveringOverTray:!1,isHoveringOverButton:!1}),S(this,"reactionButtonRef",r.a.createRef()),S(this,"trayOpenTimer",null),S(this,"trayCloseTimer",null),S(this,"onResize",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),S(this,"onScroll",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),S(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),S(this,"handleReact",(e=7)=>{const{pinId:t,pinUpdateReactionCount:n}=this.props,i={pin_id:t,reaction_type:e},{clickedReaction:o}=this.state;o&&n(t,!1,o),this.setState({clickedReaction:e,useInitialReaction:!1}),n(t,!0,e),w.a.create("ReactionsResource",i).callUpdate()}),S(this,"handleUnreact",()=>{const{pinId:e}=this.props,t={pin_id:e};this.setState({clickedReaction:0,useInitialReaction:!1}),w.a.create("ReactionsResource",t).callDelete()}),S(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef.current&&this.reactionButtonRef.current instanceof HTMLElement){const e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),S(this,"closeTray",()=>{this.setState({isReactionTrayShowing:!1})}),S(this,"startTrayCloseTimer",()=>{clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{const{isHoveringOverTray:e,isHoveringOverButton:t}=this.state;e||t||this.closeTray()},300)}),S(this,"handleOnHoverButton",()=>{this.setState({isHoveringOverButton:!0}),clearTimeout(this.trayOpenTimer),this.trayOpenTimer=setTimeout(()=>{const{isReactionTrayShowing:e,isHoveringOverButton:t}=this.state;!e&&t&&this.setState({isReactionTrayShowing:!0})},500),this.tooltipExperience&&this.tooltipExperience.complete()}),S(this,"handleOffHoverButton",()=>{this.setState({isHoveringOverButton:!1}),this.startTrayCloseTimer()}),S(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),S(this,"handleOffHoverTray",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),S(this,"handleClickButton",()=>{const{clickedReaction:e,useInitialReaction:t}=this.state,{pinId:n,pinUpdateReactionCount:i,reactionByMe:o}=this.props,r=t?o:e;r?(i(n,!1,r),this.handleUnreact()):this.setReaction("love"),clearTimeout(this.trayOpenTimer),this.closeTray(),Object(_.b)(101,{view:3,viewParameter:139,element:11354,objectId:n})}),S(this,"setReaction",e=>{this.handleReact(Object(f.a)(e).type),this.handleShowConfirmation()}),S(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),S(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){clearTimeout(this.trayOpenTimer),clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){const{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:n,clickedReaction:o,useInitialReaction:r,isHoveringOverTray:s}=this.state,{reactionByMe:a,showTooltip:c}=this.props,p=r?a:o,h=p?f.b[p]:"default",{staticAsset:m,label:j}=Object(f.a)(h);return Object(i.jsxs)(l.e,{position:"relative",children:[Object(i.jsx)(u.a,{accessibilityLabel:"reaction",onClick:this.handleClickButton,onMouseEnter:this.handleOnHoverButton,onMouseLeave:this.handleOffHoverButton,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"},children:({active:e,hovered:t,focused:n})=>{let o={...v};return e?o={...v,...R}:t||s?o={...v,...C}:n&&(o={...v,...T}),Object(i.jsx)(l.e,{color:"transparent",rounding:"circle",dangerouslySetInlineStyle:{__style:o},children:Object(i.jsx)(l.e,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:44,minWidth:44}},children:Object(i.jsx)(l.e,{height:24,width:24,ref:this.reactionButtonRef,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${m})`}}})})})}}),c&&!e&&!n&&r&&Object(i.jsx)(d,{experienceIds:[501977,501995],idealDirection:"down",placementId:12,anchor:this.reactionButtonRef.current,flyoutSize:"lg",onExperienceMount:this.handleExperienceMount}),e&&!!t&&!!t.left&&!!t.top&&Object(i.jsx)(l.e,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(i.jsx)(l.P,{top:0,children:Object(i.jsx)(l.T,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleOffHoverTray,children:Object(i.jsx)(O,{reactionButtonRect:t,handleReactionTrayClick:this.setReaction})})})}),n&&!!p&&j&&Object(i.jsx)(b,{reactionLabel:j,handleHideConfirmation:this.handleHideConfirmation})]})}}var P=Object(p.connect)(null,e=>({pinUpdateReactionCount:(t,n,i)=>e(function(e,t,n){return{type:"PIN_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:n}}}(t,n,i))}))(I),D=n("rYoy"),k=n("zXAL"),E=n("T5j3"),B=n("/zJj");function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const L=Object(o.lazy)(()=>Promise.resolve().then(n.bind(null,"fepT")));class M extends r.a.Component{constructor(e){super(e),A(this,"sendExperienceComplete",()=>{}),A(this,"handleExternalSend",()=>{this.sendExperienceComplete()}),A(this,"onSendExperienceMount",e=>{e&&e.complete&&500946===e.experience_id&&(this.sendExperienceComplete=e.complete)}),A(this,"promoteButtonRef",Object(o.createRef)()),this.sendButtonTooltipRef=r.a.createRef()}render(){const{editable:e,gridDescription:t,hidePromoteButton:n,imageSrc:o,isFlyoutOpen:c,isOnSecretBoard:p,isPdp:u,onEditSubmit:h,onFlyoutDismiss:m,onToggleFlyout:b,pin:j,promoteButton:f,saveButton:g,shareButtonRef:y,viewParameter:x}=this.props,O=p?null:Object(i.jsx)(D.a,{children:Object(i.jsxs)(l.e,{children:[Object(i.jsx)(l.e,{ref:this.sendButtonTooltipRef,children:Object(i.jsx)(L,{buttonType:"icon",gridDescription:t,imageSrc:o,isFlyoutOpen:c,onExternalSend:this.handleExternalSend,onFlyoutDismiss:m,onToggleFlyout:b,pinId:j.id,sendType:"pin",shareButtonRef:y})}),g&&!c&&Object(i.jsx)(d,{experienceIds:[500946],placementId:12,anchor:this.sendButtonTooltipRef.current,onExperienceMount:this.onSendExperienceMount})]})}),w=Object(E.c)(j),_=Object(i.jsxs)(l.e,{display:"flex",color:"white",justifyContent:"between",rounding:2,"data-test-id":"closeup-action-items",maxWidth:u?B.f:B.d,children:[Object(i.jsxs)(l.e,{display:"flex",children:[e&&Object(i.jsx)(l.e,{marginEnd:1,children:Object(i.jsx)(s.a,{carouselSlotCurrentIndex:j&&j.carousel_data&&j.carousel_data.index,pinId:j.id,onSubmit:h,view:3,viewParameter:x})}),Object(i.jsx)(a.a,{pin:j,viewParameter:x})]}),Object(i.jsxs)(l.e,{alignItems:"center",display:"flex",children:[O,w&&Object(i.jsx)(D.a,{children:Object(i.jsx)(P,{pinId:j.id,reactionByMe:j.reaction_by_me,showTooltip:!0})}),!n&&f&&Object(i.jsx)(D.a,{children:Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(l.e,{ref:this.promoteButtonRef,children:f}),Object(i.jsx)(d,{experienceIds:[501121],idealDirection:"down",placementId:12,anchor:this.promoteButtonRef.current,flyoutSize:"lg"})]})})]})]});return Object(i.jsx)(r.a.Fragment,{children:Object(i.jsxs)(l.e,{display:"flex",justifyContent:"between",children:[_,Object(i.jsx)(l.e,{marginStart:3,children:g})]})})}}t.default=Object(k.a)(M)},tkfL:function(e,t,n){var i=n("3vRR");n.d(t,"a",(function(){return i.a}));var o=n("Pus6");n.d(t,"b",(function(){return o.a}))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/CloseupActionBarCommon-d9196ffb0a0782072ecd.mjs.map