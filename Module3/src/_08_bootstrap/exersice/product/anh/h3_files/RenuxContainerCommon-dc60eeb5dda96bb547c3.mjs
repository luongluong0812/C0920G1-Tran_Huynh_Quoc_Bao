(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["RenuxContainerCommon"],{"+6dQ":function(e,t,n){var s=n("28DW"),o=n("D2p8");t.a=e=>{o.c.resume(o.b),Object(s.a)("web.dismiss_account_switcher."+e)}},"/lhQ":function(e,t,n){t.a=e=>0===e.trim().length},"0Bqi":function(e,t,n){n.d(t,"a",(function(){return p}));var s=n("nKUr"),o=n.n(s),r=n("q1tI"),i=n.n(r),a=n("SCuf"),c=n("Ye/N"),l=n("MKeS"),u=n("YI5+"),d=n("n6mq");const h=Object(l.a)({resolved:{},chunkName:()=>"FullPageSignup",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>n.e("FullPageSignup").then(n.bind(null,"CRJj")),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return"CRJj"}});function p(e){return Object(s.jsx)(u.a,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>Object(s.jsx)(d.e,{display:"flex",justifyContent:"center",flex:"grow","data-test-id":"account-switcher-modal",children:Object(s.jsx)(h,{fallback:Object(s.jsx)(a.a,{}),container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:"login",signupSource:"login",customLoginTagline:e.customTaglineText||c.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account")})})})}},"0G5S":function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));const s=(e,t=null)=>{try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||t}catch(n){return console.error("Cannot access localStorage."),t}},o=e=>{try{if("undefined"==typeof window)return;window.localStorage.removeItem(e)}catch(t){console.error("Cannot access localStorage.")}},r=(e,t)=>{try{if("undefined"==typeof window)return;window.localStorage.setItem(e,t)}catch(n){console.error("Cannot access localStorage.")}}},"4O/9":function(e,t,n){var s=n("Sxd8");e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=s(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},"573u":function(e,t,n){n.d(t,"a",(function(){return o}));const s=!("undefined"==typeof window||!window.performance||!window.performance.now);function o(e,t,n){this.category=e,this.variable=t,this.label=n,this.startTime,this.elapsedTime}function r(){return s?window.performance.now():Date.now()}function i(){this.timers={}}o.prototype.start=function(){return this.startTime=r(),this},o.prototype.end=function(){return this.elapsedTime=Math.round(r()-this.startTime),this.startTime=s?Math.round(this.startTime):null,this},o.prototype.getCompletedTime=function(){return this.elapsedTime},o.prototype.send=function(){if(this.elapsedTime>0&&this.elapsedTime<6e5){const{category:e,variable:t,label:s,elapsedTime:o}=this;Promise.resolve().then(n.bind(null,"rh3l")).then(({default:n})=>{n.logToServer(n.SERVER_LOG_TYPE.INTERACTION_TIMING,n.HTTP_METHOD.POST,{category:e,variable:t,label:s,time:o})})}return this},i.prototype.start=function(e,t,n,...s){const r=Array.prototype.slice.call([e,t,n,...s],0,2).join(":"),i=new o(e,t,n).start();this.timers[r]=i},i.prototype.end=function(e,t,n){const s=e+":"+t,o=this.timers[s];return o&&(o.end(),n&&o.send(),delete this.timers[s]),o};new i},AXUD:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));const s=412,o=429},CzMn:function(e,t,n){n.d(t,"a",(function(){return o}));var s=n("QLqj");function o(){return function(e){const t={};return e.forEach(e=>{const n=s.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)}),JSON.stringify(t)}(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}},HZII:function(e,t,n){var s=n("4O/9");e.exports=function(e){return s(2,e)}},IDoE:function(e,t,n){var s=n("xGpI");t.a=()=>Object.keys(Object(s.a)()).length},ItC7:function(e,t,n){n.r(t),n.d(t,"isRenuxBestPinsFallBack",(function(){return f})),n.d(t,"RenuxContainer",(function(){return x}));var s=n("nKUr"),o=n("q1tI"),r=n("/MKj"),i=n("QbJe"),a=n("NdXn"),c=n("MKmU"),l=n("ANjH"),u=n("gC5q"),d=n("Wer7"),h=n("0/lc"),p=n("U4JR"),g=n("zXAL"),b=n("5239");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=e=>e&&e.display_data&&e.display_data.refresh_homefeed_background;class x extends o.Component{constructor(...e){super(...e),m(this,"inRenuxExperience",()=>{const{experience:e}=this.props;return e&&500278===e.experience_id}),m(this,"handleDismiss",()=>{const{dismissCallback:e,experience:t,experienceClient:n,fetchUserHomefeedResource:s,viewer:o}=this.props;Object(p.b)(101,{component:17,element:1150,view:213}),this.inRenuxExperience()&&n.dismissExperience(11,500278),f(t)&&s(o),e&&e()}),m(this,"handleComplete",()=>{const{completeCallback:e,completeRenuxAction:t,experienceClient:n,fetchUserHomefeedResource:s,setRenuxUserState:o,viewer:r}=this.props;Object(p.b)(101,{component:17,element:96,view:213}),this.inRenuxExperience()&&n.completeExperience(11,500278);o(parseInt((new Date).getTime()/1e3,10)),t(),s(r),e&&e()})}componentDidMount(){const{experienceClient:e}=this.props;this.inRenuxExperience()&&e.viewExperience(11,500278)}render(){const{experience:e,isSimpleRenux:t}=this.props;if(t||this.inRenuxExperience()){const n=e&&e.display_data||{},o=t?b.t:n;return Object(s.jsx)(i.a,{...Object(u.a)(a.a,!0)(o),handleComplete:this.handleComplete,handleDismiss:this.handleDismiss,...this.props})}return null}}t.default=Object(l.compose)(Object(r.connect)((function({viewer:e}){return{viewer:e}}),e=>({completeRenuxAction:()=>e({type:"COMPLETE_RENUX"}),fetchUserHomefeedResource:t=>e(Object(d.a)("UserHomefeedResource",Object(c.a)({inNux:!0,staticFeed:!1,viewerIsPartner:t.isAuth&&t.isPartner}))),setRenuxUserState:t=>e(Object(h.a)(b.q,t))})),g.a)(x)},L2Gz:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c}));var s=n("QLqj");function o(e,t){return e.some(e=>e.id===t.id)}function r(e){const t=[];if(e){const n=72e5,s=Date.now()-n;for(const o of e)o.ts>=s&&("string"==typeof o.image_signature&&t.push(o.image_signature),"string"==typeof o.first_pin_image_signature&&t.push(o.first_pin_image_signature))}return t}function i(){return{plpImages:r(s.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")||[]),blpImages:r(s.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin")||[])}}function a(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function c(e){const t=e.log_data;if(!t)return"";return JSON.parse(t).source||""}},MKeS:function(e,t,n){n.d(t,"b",(function(){return C}));var s=n("q1tI"),o=n.n(s);function r(e,t){if(null==e)return{};var n,s,o={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=n("TOwV"),l=n("2mql"),u=n.n(l);function d(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}function h(e){console.warn("loadable: "+e)}var p=o.a.createContext();function g(e){return e+"__LOADABLE_REQUIRED_CHUNKS__"}var b={initialChunks:{}},m="PENDING",f="REJECTED";var x=function(e){return e};function j(e){var t=e.defaultResolveComponent,n=void 0===t?x:t,s=e.render,l=e.onLoad;function h(e,t){void 0===t&&(t={});var h=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),g={};function x(e){return t.cacheKey?t.cacheKey(e):h.resolve?h.resolve(e):"static"}function j(e,s,o){var r=t.resolveComponent?t.resolveComponent(e,s):n(e);if(t.resolveComponent&&!Object(c.isValidElementType)(r))throw new Error("resolveComponent returned something that is not a React component!");return u()(o,r,{preload:!0}),r}var _,w=function(e){var n,o;function c(n){var s;return(s=e.call(this,n)||this).state={result:null,error:null,loading:!0,cacheKey:x(n)},d(!n.__chunkExtractor||h.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),n.__chunkExtractor?(!1===t.ssr||(h.requireAsync(n).catch((function(){return null})),s.loadSync(),n.__chunkExtractor.addChunk(h.chunkName(n))),a(s)):(!1!==t.ssr&&(h.isReady&&h.isReady(n)||h.chunkName&&b.initialChunks[h.chunkName(n)])&&s.loadSync(),s)}o=e,(n=c).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,c.getDerivedStateFromProps=function(e,t){var n=x(e);return i({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var u=c.prototype;return u.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===f&&this.setCache(),this.state.loading&&this.loadAsync()},u.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},u.componentWillUnmount=function(){this.mounted=!1},u.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},u.getCacheKey=function(){return x(this.props)},u.getCache=function(){return g[this.getCacheKey()]},u.setCache=function(e){void 0===e&&(e=void 0),g[this.getCacheKey()]=e},u.triggerOnLoad=function(){var e=this;l&&setTimeout((function(){l(e.state.result,e.props)}))},u.loadSync=function(){if(this.state.loading)try{var e=j(h.requireSync(this.props),this.props,y);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:h.resolve(this.props),chunkName:h.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},u.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var n=j(t,e.props,{Loadable:y});e.safeSetState({result:n,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},u.resolveAsync=function(){var e=this,t=this.props,n=(t.__chunkExtractor,t.forwardedRef,r(t,["__chunkExtractor","forwardedRef"])),s=this.getCache();return s||((s=h.requireAsync(n)).status=m,this.setCache(s),s.then((function(){s.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:h.resolve(e.props),chunkName:h.chunkName(e.props),error:t?t.message:t}),s.status=f}))),s},u.render=function(){var e=this.props,n=e.forwardedRef,o=e.fallback,a=(e.__chunkExtractor,r(e,["forwardedRef","fallback","__chunkExtractor"])),c=this.state,l=c.error,u=c.loading,d=c.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===m)throw this.loadAsync();if(l)throw l;var h=o||t.fallback||null;return u?h:s({fallback:h,result:d,options:t,props:i({},a,{ref:n})})},c}(o.a.Component),O=(_=w,function(e){return o.a.createElement(p.Consumer,null,(function(t){return o.a.createElement(_,Object.assign({__chunkExtractor:t},e))}))}),y=o.a.forwardRef((function(e,t){return o.a.createElement(O,Object.assign({forwardedRef:t},e))}));return y.preload=function(e){h.requireAsync(e)},y.load=function(e){return h.requireAsync(e)},y}return{loadable:h,lazy:function(e,t){return h(e,i({},t,{suspense:!0}))}}}var _=j({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,n=e.props;return o.a.createElement(t,n)}}),w=_.loadable,O=_.lazy,y=j({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),S=y.loadable,v=y.lazy,k="undefined"!=typeof window;function C(e,t){void 0===e&&(e=function(){});var n=(void 0===t?{}:t).namespace,s=void 0===n?"":n;if(!k)return h("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var o=null;if(k){var r=g(s),i=document.getElementById(r);if(i){o=JSON.parse(i.textContent);var a=document.getElementById(r+"_ext");if(!a)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(a.textContent).namedChunks.forEach((function(e){b.initialChunks[e]=!0}))}}if(!o)return h("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var c=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,n=t.push.bind(t);function s(){o.every((function(e){return t.some((function(t){return t[0].indexOf(e)>-1}))}))&&(c||(c=!0,e()))}t.push=function(){n.apply(void 0,arguments),s()},s()})).then(e)}var I=w;I.lib=S,O.lib=v;t.a=I},MKmU:function(e,t,n){t.a=({inNux:e,inNewsHub:t,staticFeed:n,viewerIsPartner:s})=>({field_set_key:s?"hf_grid_partner":"hf_grid",in_nux:e,in_news_hub:t,prependPartner:s,static_feed:n})},NwVv:function(e,t,n){var s=n("ipvL"),o=n("bBqG");t.a=(e,t,n)=>{const r=s.a.getAccountsJSON();r[e.id]=(e=>{const t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||Object(o.a)("utils.incomplete_user_values"),e.partner&&e.partner.is_create?{...t,partner:{is_create:e.partner.is_create}}:t})(e),s.a.setAccounts(JSON.stringify(r)),t&&n&&Object(o.a)("new_account_add_success",{method:t,user_added:e.id},n)}},OCob:function(e,t,n){var s=n("+NLT");t.a=()=>({referrer:s.a.instance.referrer,facebookToken:s.a.instance.facebook_token,unauthId:s.a.instance.unauth_id,origin:s.a.instance.origin,appType:s.a.instance.app_type})},QbJe:function(e,t,n){var s=n("nKUr"),o=n("q1tI"),r=n.n(o),i=n("/MKj"),a=n("L2Gz"),c=n("Ye/N"),l=n("EgnG"),u=n("n6mq");const d=2640,h=500,p=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"],g=[10,-10,0];var b=r.a.memo((function(){const e=Object(o.createRef)();return Object(o.useEffect)(()=>{Object(l.a)({targets:e.current,translateY:["20%","-20%"],opacity:{value:0,delay:2680,duration:h},duration:4e3,easing:"cubicBezier(.35, 0, .7, .7)",fillMode:"forwards"})},[]),Object(s.jsx)(u.e,{width:"100%",ref:e,dangerouslySetInlineStyle:{__style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",columnGap:"8px"}},children:function(){const e=[];let t,n=0;for(let o=0;o<3;o+=1){e.push([]),t=[];for(let e=0;e<p.length;e+=1){const r=p[n];t.push(Object(s.jsx)(u.e,{color:r,height:168,marginTop:2,rounding:4,width:112},e)),n+=3,n>=p.length&&(n=o)}e[o].push(Object(s.jsx)(u.e,{marginTop:g[o],children:t},o))}return e}()})}));var m=r.a.memo((function({selectedInterest:e}){const t=Object(o.createRef)(),n=Object(o.createRef)(),r=Object(o.createRef)(),i=(e,t)=>Object(l.a)({targets:n.current,opacity:[0,1],delay:3640,duration:h,fillMode:"forwards"});Object(o.useEffect)(()=>{Object(l.a)({targets:t.current,scale:[.5,1],translateY:[448,0],opacity:[{value:0,duration:0},{value:1,duration:0}],delay:d,duration:800,easing:"linear",fillMode:"forwards"}),i(n.current),i(r.current)},[]);const a={label:c.a._("Food and Drink","Title for topic","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},{label:p,name:g,images:b}=e||a,{"400x":{url:m,height:f,width:x}}=b,j=(p||g||"").trim().toLowerCase().replace(/\s/g,"").concat(".com");return Object(s.jsxs)(u.e,{ref:t,height:354,width:236,position:"absolute",marginTop:"auto",marginBottom:"auto",top:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{right:"96px"}},children:[Object(s.jsx)(u.B,{height:354,rounding:4,width:236,children:Object(s.jsx)(u.w,{alt:c.a._("Pin image","Pin image for nux loading step","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:f,naturalWidth:x,src:m})}),Object(s.jsx)(u.e,{ref:n,margin:3,position:"absolute",right:!0,top:!0,children:Object(s.jsx)(u.f,{accessibilityLabel:c.a._("Save button"),color:"red",size:"lg",text:c.a._("Save","save button for nux loading step","save button for nux loading step")})}),Object(s.jsxs)(u.e,{ref:r,color:"lightGray",margin:3,paddingX:3,paddingY:1,rounding:"pill",position:"absolute",bottom:!0,left:!0,maxWidth:"90%",display:"flex",alignItems:"center",justifyContent:"between",children:[Object(s.jsx)(u.e,{alignItems:"center",children:Object(s.jsx)(u.u,{accessibilityLabel:c.a._("link","Pin website url link for nux loading step","Pin website url link for nux loading step"),color:"darkGray",icon:"arrow-up-right",size:12})}),Object(s.jsx)(u.e,{flex:"grow",height:18,marginStart:2,overflow:"hidden",children:Object(s.jsx)(u.U,{size:"sm",truncate:!0,weight:"bold",children:j})})]})]})}));const f={backgroundColor:"#efefef"},x={transition:"width .4s ease-out"};function j(e,t){return Object.assign({},x,{width:e+"%",borderRadius:t})}var _=({color:e="darkGray",height:t=8,progress:n=0,outerBorderRadius:o="10px",innerBorderRadius:r="inherit"})=>{return Object(s.jsx)(u.e,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:(i=t,a=o,Object.assign({},f,{height:i+"px",borderRadius:a}))},children:Object(s.jsx)(u.e,{height:"inherit",color:e,dangerouslySetInlineStyle:{__style:j(n,r)}})});var i,a},w=n("eOdZ"),O=n("U4JR"),y=n("vVbV"),S=n("5239");function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class k extends o.PureComponent{constructor(...e){super(...e),v(this,"state",{progressPercent:0}),v(this,"gridCopyRef",Object(o.createRef)()),v(this,"pinCopyRef",Object(o.createRef)()),v(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t}=this.props;if(Object(O.b)(8900,{view:t?213:24,viewParameter:261}),e(),!t){w.a.create("UserStateResource",{state:S.l,value:S.a}).callCreate()}})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t}=this.props;if(!t){w.a.create("UserStateResource",{state:S.l,value:S.r}).callCreate()}e("loader"),Object(O.b)(13,{view:t?213:24,viewParameter:261}),this.intervalId=setInterval(()=>this.setState(e=>({progressPercent:Math.min(e.progressPercent+100/17,100)})),300),Object(l.a)({targets:this.gridCopyRef.current,opacity:[1,0],delay:d,duration:h,easing:"linear",fillMode:"forwards"}),Object(l.a)({targets:this.pinCopyRef.current,opacity:[0,1],delay:3140,duration:h,easing:"linear",fillMode:"forwards"})}componentDidUpdate(e,t){const{progressPercent:n}=t,{progressPercent:s}=this.state;n!==s&&s>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,1e3))}componentWillUnmount(){clearInterval(this.intervalId)}render(){const{isRenux:e,selectedInterests:t,showProgressBar:n}=this.props,{progressPercent:o}=this.state,r=e?c.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step","Details for ReNUX loading step"):c.a._("We're building your home feed with lots of Pins...","Details for nux loading step","Details for nux loading step"),i=c.a._("They are links saved from around the web","Pin education on NUX loading step","Pin education on NUX loading step"),a=Object(s.jsx)(_,{height:10,innerBorderRadius:"0 32px 32px 0",outerBorderRadius:"32px 32px 0 0",progress:o});return Object(s.jsxs)(u.e,{display:"flex",direction:"column",height:"100%",overflow:"hidden","data-test-id":"nux-complete-loader",children:[Object(s.jsxs)(u.e,{alignItems:"center",direction:"row",display:"flex",height:"100%",justifyContent:"between",overflow:"hidden",paddingX:12,width:"100%",children:[Object(s.jsxs)(u.e,{marginStart:12,position:"relative",width:230,children:[Object(s.jsxs)(u.e,{ref:this.gridCopyRef,children:[Object(s.jsx)(u.t,{size:"md",children:c.a._("All set!","Title for nux loading step","Title for nux loading step")}),Object(s.jsx)(u.e,{marginTop:4,children:Object(s.jsx)(u.U,{children:r})})]}),Object(s.jsxs)(u.e,{ref:this.pinCopyRef,position:"absolute",top:!0,children:[Object(s.jsx)(u.t,{size:"md",children:c.a._("Pins are ideas","Pin education on NUX loading step","Pin education on NUX loading step")}),Object(s.jsx)(u.e,{marginTop:4,children:Object(s.jsx)(u.U,{children:i})})]})]}),Object(s.jsx)(u.e,{marginEnd:2,children:Object(s.jsx)(b,{})}),Object(s.jsx)(m,{selectedInterest:t[0]})]}),!n&&Object(s.jsx)(u.e,{height:10,position:"absolute",top:!0,width:"100%",children:Object(s.jsx)(u.e,{height:65,overflow:"hidden",paddingX:2,rounding:8,children:a})})]})}}var C=Object(i.connect)(({viewer:e})=>({viewer:e}),e=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))}))(k),I=n("IZzd"),N=n("028R"),T=n("0/lc");function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class L extends o.Component{constructor(...e){super(...e),P(this,"onInstallButtonClicked",()=>{const{isRenux:e}=this.props;I.a.handleExtensionInstall(this.incrementStepAndCompleteLoading),Object(O.b)(101,{component:17,element:280,view:e?213:24,viewParameter:260})}),P(this,"onSkipButtonClick",()=>{const{isRenux:e}=this.props;Object(O.b)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),this.incrementStepAndCompleteLoading()}),P(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(S.a),e()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(S.r),e("extension"),Object(O.b)(13,{view:t?213:24,viewParameter:260})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t}}=this.props;return Object(s.jsx)(N.a,{header:e,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:t})}}var E=Object(i.connect)(null,(e,t)=>({setNuxUpsellProgress:t=>e(Object(T.a)(S.i,t)),dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))}))(L),R=n("JW66"),A=n("7pfs");function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B=()=>{},G=({isChecked:e,label:t,selectGender:n,value:o})=>Object(s.jsx)(A.a,{children:({hovered:r,onMouseEnter:i,onMouseLeave:a})=>Object(s.jsx)(u.e,{color:r?"lightGray":"transparent","data-test-id":`nux-gender-${t}-label`,onKeyUp:t=>{e||t.keyCode!==R.a.KeyCode.SPACE&&t.keyCode!==R.a.KeyCode.ENTER||n()},onMouseEnter:i,onMouseLeave:a,onMouseUp:()=>{e||n()},rounding:r?2:0,children:Object(s.jsx)(u.x,{htmlFor:t,children:Object(s.jsxs)(u.e,{alignItems:"center",display:"flex",flex:"none",height:60,paddingX:8,children:[Object(s.jsx)(u.I,{checked:e,id:t,name:"genderOptions",onChange:B,size:"md",value:t}),Object(s.jsx)(u.e,{display:"flex",flex:"grow",marginStart:6,children:o})]})})})}),D=({children:e})=>Object(s.jsx)(u.t,{size:"sm",children:e});class M extends o.PureComponent{constructor(...e){super(...e),U(this,"state",{customGender:this.props.customGender,gender:this.props.gender,showCustomGenderTextfield:this.props.gender===S.u&&this.props.customGender.length>0,showNextButton:[S.g,S.f].includes(this.props.gender)||this.props.customGender.length>0,showCustomGenderDoneButton:this.props.gender===S.u&&this.props.customGender.length>0}),U(this,"setCustomGender",e=>{e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):this.state.showNextButton&&e.target instanceof HTMLInputElement?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):this.setState({customGender:"",showCustomGenderDoneButton:!1})}),U(this,"updateGenderCompleteStep",()=>{const{incrementNuxStep:e,isRenux:t,updateGenderInfo:n}=this.props,{customGender:s,gender:o}=this.state;n(o===S.u?{gender:S.u,custom_gender:s.slice(0,30)}:{gender:o}).then(()=>{this.setUserStateCompletedGenderStep(),Object(O.b)(8900,{view:t?213:24,viewParameter:3120}),e()})}),U(this,"logButtonClick",e=>{let t;switch(e){case"genderButton":t=241;break;case"nextButton":t=96;break;case"submitButton":t=11906}t&&Object(O.b)(101,{component:17,element:t,view:this.props.isRenux?213:24,viewParameter:3120})})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxGenderProgress:n}=this.props;e("gender"),t||n(S.r),Object(O.b)(13,{view:t?213:24,viewParameter:3120})}onSelectGender(e){const{showCustomGenderTextfield:t,showNextButton:n}=this.state;n?this.setState({gender:e,showCustomGenderTextfield:e===S.u},()=>this.logButtonClick("genderButton")):e===S.u||t?this.setState({gender:S.u,customGender:"",showCustomGenderTextfield:!t,showCustomGenderDoneButton:!1},()=>this.logButtonClick("genderButton")):this.setState({gender:e},()=>{this.logButtonClick("genderButton"),this.updateGenderCompleteStep()})}setUserStateCompletedGenderStep(){const{isRenux:e,setNuxGenderProgress:t}=this.props;e||t(S.a)}render(){const{isRenux:e,personalizationCopy:{headerText:t,subHeaderText:n}}=this.props,{customGender:r,showCustomGenderDoneButton:i,showCustomGenderTextfield:a,showNextButton:l}=this.state,d=c.a._("Female","nux.gender.femaleButton","Option for select female gender"),h=c.a._("Male","nux.gender.maleButton","Option for select male gender"),p=c.a._("Specify another","nux.gender.specifyButton","Option for gender besides male and female"),g=c.a._("Enter preferred gender","nux.gender.customGenderPlaceholder","placeholder text for custom gender text field"),b=c.a._("Submit","nux.gender.submitCustomGender","button text for submitting a custom gender type"),m=a?Object(s.jsxs)(o.Fragment,{children:[Object(s.jsx)(u.e,{"data-test-id":"nux-gender-unspecified-input",display:"flex",flex:"grow",marginEnd:!l&&i?3:0,children:Object(s.jsx)(u.e,{alignItems:"center",width:"100%",children:Object(s.jsx)(u.W,{id:"customGender",onChange:({event:e})=>this.setCustomGender(e),placeholder:r||g,size:"lg"})})}),!l&&i&&Object(s.jsx)(u.e,{"data-test-id":"nux-gender-unspecified-done-btn",children:Object(s.jsx)(u.f,{color:"red",inline:!0,onClick:()=>{this.logButtonClick("submitButton"),this.updateGenderCompleteStep()},size:"lg",text:b})})]}):Object(s.jsx)(D,{children:p});return Object(s.jsxs)(u.e,{direction:"column",display:"flex",height:"100%",justifyContent:"start",paddingY:8,width:"100%",children:[Object(s.jsx)(u.e,{direction:"column",display:"flex",marginTop:11,paddingX:8,paddingY:8,children:e?Object(s.jsxs)(u.e,{marginTop:8,paddingY:4,children:[Object(s.jsx)(u.t,{align:"center",size:"md",children:t}),Object(s.jsx)(u.e,{marginTop:3,children:Object(s.jsx)(u.U,{align:"center",children:n})})]}):Object(s.jsx)(u.t,{align:"center",size:"lg",children:t})}),Object(s.jsxs)(u.e,{paddingY:8,children:[Object(s.jsx)(G,{isChecked:!a&&this.state.gender.toLowerCase()===S.f,label:S.f,selectGender:()=>this.onSelectGender(S.f),value:Object(s.jsx)(D,{children:d})}),Object(s.jsx)(G,{isChecked:!a&&this.state.gender.toLowerCase()===S.g,label:S.g,selectGender:()=>this.onSelectGender(S.g),value:Object(s.jsx)(D,{children:h})}),Object(s.jsx)(G,{isChecked:a,label:S.u,selectGender:()=>this.onSelectGender(S.u),value:m})]}),l&&Object(s.jsx)(u.e,{"data-test-id":"nux_gender_next_btn",marginEnd:8,marginStart:8,marginTop:"auto",children:Object(s.jsx)(u.f,{accessibilityLabel:c.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:a&&0===this.state.customGender.length,onClick:()=>{this.logButtonClick("nextButton"),this.updateGenderCompleteStep()},size:"lg",text:c.a._("Next","next nux step button","next nux step button"),type:"button"})})]})}}var z=Object(i.connect)(({viewer:e})=>({gender:e.gender?e.gender:"",customGender:e.customGender?e.customGender:""}),(e,t)=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),setNuxGenderProgress:t=>e(Object(T.a)(S.k,t)),updateGenderInfo:t=>e(Object(T.e)({updateUserData:t}))}))(M),F=n("TPPM"),H=n("w70y");var q=e=>{const{defaultOptions:t,id:n,items:o,name:r,onChange:i,value:a}=e,c=(o.data||t||[]).sort((e,t)=>e.name.localeCompare(t.name)).map(({name:e,key:t})=>({label:e.toString(),value:t}));return Object(s.jsx)(u.M,{id:n,name:r,onChange:i,options:c,size:"lg",value:a})};function X(e){const t=Object(H.a)({name:"CountriesResource"});return Object(s.jsx)(q,{items:t,...e})}function W(e){const t=Object(H.a)({name:"LocalesResource"});return Object(s.jsx)(q,{items:t,...e})}var $=n("QLqj"),V=n("kmwA"),Y=n("ANjH"),K=n("pLLR");function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Q extends o.PureComponent{constructor(...e){super(...e),J(this,"state",{locale:this.props.reduxLocale||(this.props.requestContext||{}).locale||S.c,country:this.props.reduxCountry||(this.props.requestContext||{}).country||S.b,swappingLanguage:!1}),J(this,"onNextButtonClick",()=>{const{incrementNuxStep:e,isRenux:t,updateUserInfo:n,setNuxLocaleProgress:s}=this.props,{country:o,locale:r}=this.state;n({updateUserData:{country:o,locale:r}}).then(()=>{t||s(S.a),Object(O.b)(101,{component:17,element:96,view:24,viewParameter:3139}),Object(O.b)(8900,{view:24,viewParameter:3139}),e()})}),J(this,"updateLocale",({value:e})=>this.setState({locale:e})),J(this,"updateCountry",({value:e})=>this.setState({country:e}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxLocaleProgress:n}=this.props;t||n(S.r),e("country");$.b.localStorage.getItem("signupUserLocale")||$.b.localStorage.getItem("signupUserCountry")||Object(O.b)(13,{view:24,viewParameter:3139})}componentDidUpdate(e,t){const{toggleLoadingIndicator:n,isBizNux:s,updateUserInfo:o}=this.props,{country:r,locale:i}=t,{country:a,locale:c}=this.state,l=r!==a,u=i!==c,d=V.a.settings.EU_COUNTRIES_2020_COOKIE_POLICY,h=!d.includes(r)&&d.includes(a);(l||u)&&o({updateUserData:{...h?{allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1}:{},country:a,locale:c}}).then(()=>{l&&$.b.localStorage.setItem("signupUserCountry",a),u&&($.b.localStorage.setItem("signupUserLocale",c),s?this.setState({swappingLanguage:!0}):n(!0),Object(F.a)("/"))})}render(){const{personalizationCopy:{headerText:e}}=this.props,{country:t,locale:n,swappingLanguage:o}=this.state;return Object(s.jsxs)(u.e,{direction:"column",display:"flex",height:"100%",padding:8,width:"100%",children:[Object(s.jsxs)(u.e,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginBottom:7,children:[Object(s.jsx)(u.e,{marginTop:10,paddingY:5,width:"100%",children:Object(s.jsx)(u.t,{align:"center",size:"md",children:e})}),Object(s.jsxs)(u.e,{marginTop:12,paddingY:5,width:"100%",children:[Object(s.jsx)(u.e,{"data-test-id":"nux-locale-select",children:Object(s.jsx)(W,{id:"newUserLanguage",name:"locale",onChange:this.updateLocale,value:n})}),Object(s.jsx)(u.e,{"data-test-id":"nux-country-select",marginTop:4,children:Object(s.jsx)(X,{id:"newUserCountry",name:"country",onChange:this.updateCountry,value:t})})]})]}),Object(s.jsx)(u.e,{bottom:!0,"data-test-id":"nux-locale-country-next-btn",children:Object(s.jsx)(u.f,{color:"red",disabled:o||"Country"===t,onClick:this.onNextButtonClick,size:"lg",text:c.a._("Next","go to next step","go to next step"),type:"submit"})})]})}}var Z=Object(Y.compose)(Object(i.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),(e,t)=>({updateUserInfo:t=>e(Object(T.e)(t)),setNuxLocaleProgress:t=>e(Object(T.a)(S.j,t)),dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))})),K.e)(Q),ee=n("D2p8"),te=n("b7nI"),ne=n("TgLd"),se=n("QAzJ");const oe=600,re=640,ie=520,ae=816,ce=["NuxDismissableWelcome","NuxWelcomeNameStep","NuxAboutYouStep","NuxGenderStep","NuxLocaleCountryStep"],le=e=>ce.includes(e);var ue=Object(o.memo)((function({children:e,currentIndex:t,hideDots:n,inUsecaseQuiz:i,isLoading:a,numSteps:d,onClose:h,onPrevStepClick:p,stepName:g}){const{anyEnabled:b,group:m}=Object(se.a)("web_nux_modal_gestalt"),{isRTL:f}=Object(K.d)(),x=Object(o.useRef)(),j=Object(o.useRef)(),_=Object(o.useRef)(le(g)),w=Object(o.useRef)(g),O=Object(o.useCallback)(e=>{var t;(null==e||null===(t=e.previousSibling)||void 0===t?void 0:t.style)&&"enabled_bg"===m&&(e.previousSibling.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.previousSibling.style.opacity=1),x.current=e},[m]);Object(o.useEffect)(()=>(b||(document.body&&(document.body.style.overflow="hidden"),ee.c.pause()),()=>{b||(document.body&&(document.body.style.overflow=""),ee.c.resume())}),[]),Object(o.useEffect)(()=>{b&&(le(w.current)!==le(g)&&(()=>{if(!x.current||!j.current)return;const e=!le(g);Object(l.a)({targets:x.current,duration:e?500:0,width:e?[ie,ae]:[ae,ie],easing:"linear",fillMode:"forwards"}),Object(l.a)({targets:j.current,duration:e?500:0,height:e?[oe,re]:[re,oe],easing:"linear",fillMode:"forwards"})})(),w.current=g)},[g]);const y=Object(s.jsxs)(r.a.Fragment,{children:[a&&Object(s.jsx)(te.a,{}),!!p&&Object(s.jsx)(u.e,{left:!f,right:f,marginStart:5,marginTop:5,minHeight:40,position:"absolute",top:!0,children:Object(s.jsx)(u.v,{accessibilityLabel:c.a._("Go back to previous step","Accessibility label on NUX back button","Accessibility label on NUX back button"),icon:"directional-arrow-left",iconColor:"darkGray",onClick:p,size:"md"})}),!n&&Object(s.jsx)(u.e,{alignItems:"center",alignSelf:"center",display:"flex",height:16,justifyContent:"evenly",marginBottom:4,marginEnd:4,marginStart:4,marginTop:8,minHeight:16,width:40*d,children:[...Array(d).keys()].map(e=>{const n=e>t,o=n?"6px":"10px";return Object(s.jsx)(u.e,{color:n?"gray":"darkGray","data-test-id":"nux-toc-dot",height:o,rounding:"circle",width:o},e)})}),!!h&&Object(s.jsx)(u.e,{dangerouslySetInlineStyle:{__style:i?{zIndex:1}:{}},marginEnd:6,marginTop:6,minHeight:40,position:"absolute",right:!0,top:!0,children:Object(s.jsx)(u.v,{accessibilityLabel:c.a._("cancel","close nux modal","close nux modal"),icon:"cancel",iconColor:"darkGray",onClick:h,size:"sm"})}),Object(s.jsx)(u.e,{flex:"grow",height:"100%",width:"100%",children:e})]});return b?Object(s.jsx)(ne.b,{accessibilityModalLabel:"nux",closeOnOutsideClick:!1,onDismiss:()=>{},modalRef:O,size:_.current?ie:ae,children:Object(s.jsx)(u.e,{direction:"column",display:"flex",height:_.current?oe:re,position:"relative",ref:j,children:y})}):Object(s.jsx)(u.y,{children:Object(s.jsx)(u.e,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",zIndex:"999"}},display:"flex",height:"100vh",justifyContent:"center",overflow:"scroll",position:"fixed",top:!0,width:"100vw",children:Object(s.jsx)(u.e,{color:"white",dangerouslySetInlineStyle:{__style:(S=g,{transition:le(S)?"":"width 0.5s, height 0.5s",borderRadius:"32px"})},direction:"column",display:"flex",height:le(g)?oe:re,position:"relative",rounding:2,width:le(g)?ie:ae,children:y})})});var S})),de=n("CzMn"),he=n("1inl"),pe=n("Jr++"),ge=n("rh3l"),be=n("N0Eu"),me=n("HZII");function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xe=n.n(me)()(()=>{$.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)});class je extends r.a.PureComponent{constructor(...e){super(...e),fe(this,"gridContainer",r.a.createRef()),fe(this,"scrollContainer",r.a.createRef()),fe(this,"handleScroll",()=>{const e=this.scrollContainer.current,t=this.gridContainer.current;if(e&&t){xe();const n=e.scrollTop+e.offsetHeight>=t.clientHeight;this.props.handleBottomScroll(n)}}),fe(this,"renderInterests",e=>{const{handleInterestClickFn:t}=this.props;return Object(s.jsx)(u.e,{display:"flex",marginStart:5,marginTop:-1,justifyContent:"start",wrap:!0,children:e.map((n,o)=>Object(s.jsx)(u.e,{padding:1,children:Object(s.jsx)(be.a,{clickHandler:t(n),index:o+1,interest:n,isSelected:n.is_followed,size:"xl_144",totalInterests:e.length},n.id)},o))})})}componentDidMount(){this.scrollContainer.current&&this.scrollContainer.current.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){this.scrollContainer.current&&this.scrollContainer.current.removeEventListener("scroll",this.handleScroll)}render(){const{disableScroll:e,interests:t}=this.props;return t.length>0&&$.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),Object(s.jsx)(u.e,{ref:this.scrollContainer,dangerouslySetInlineStyle:{__style:{paddingBottom:"40px"}},flex:"grow",height:"100%",overflow:e?"visible":"scrollY",paddingX:2,width:"100%",children:t.length>0?Object(s.jsx)(u.e,{ref:this.gridContainer,children:this.renderInterests(t)}):Object(s.jsx)(u.O,{accessibilityLabel:c.a._("Loading default interests"),show:!0})})}}var _e=Object(Y.compose)(Object(i.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),()=>({})),K.e)(je),we=n("573u");function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ye extends o.PureComponent{constructor(...e){super(...e),Oe(this,"state",{defaultInterests:[],defaultInterestsSet:new Set,addedContextualTopics:new Set,numTopicsToShow:null}),Oe(this,"handleInterestClickFn",e=>()=>{const{selectedInterests:t,onSelectedInterestsChange:n}=this.props,s=!Object(a.b)(t,e);n([e],s),this.logInterestClick(s),this.contextualUpdateInterests(new Set([e.id]))}),Oe(this,"logInterestClick",e=>{const{isRenux:t}=this.props,n=e?1030:1151;Object(O.b)(101,{component:36,element:n,view:t?213:24,viewParameter:172})}),Oe(this,"componentName",S.m),Oe(this,"recordRenderLogToServer",()=>{const e=this.renderTimers.pop();e.end(),ge.default.logToServer(ge.default.SERVER_LOG_TYPE.RENDER_TIME,ge.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:this.componentName})}),Oe(this,"renderTimers",[])}getExtraImageSignal(){const{plpImages:e,blpImages:t}=Object(a.a)(),{mostRecentPinImages:n}=this.props,s=e.concat(t);return n.concat(s)}componentDidMount(){const{hideFollowedInterests:e,isRenux:t,selectedInterests:n}=this.props;w.a.create("NuxInterestsResource",{is_renux:t,logNetworkTimer:!0,loggerComponentName:S.m,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:e,urlParams:Object(pe.a)()}).callGet({showError:!1},{retries:1}).then(e=>{const t=e.resource_response&&e.resource_response.data;if(t){this.logSignupTiming();const e=t.filter(e=>!e.is_followed),s=this.mapInterestsForDisplay(n,e),o=this.state.defaultInterests;this.setState({defaultInterests:s},()=>{o!==s&&this.renderTimers.unshift((new we.a).start())});const r=new Set;s.forEach(e=>{!0===e.is_followed&&r.add(e.id)}),Object.keys(r).length>0&&this.contextualUpdateInterests(r)}}).catch(e=>{he.a&&he.a.showError(e.message||c.a._("Unable to load topics","Error message when failed to load topics.","Error message when failed to load topics."))})}componentDidUpdate(e,t){const{defaultInterests:n}=this.state;n!==t.defaultInterests&&this.renderTimers.length&&this.recordRenderLogToServer(),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}getInterestsWithUpdatedIsFollowed(){const{selectedInterests:e}=this.props,{defaultInterests:t}=this.state,n=t.map(t=>(t.is_followed=Object(a.b)(e,t),t)),s=[...e.filter(e=>"type_ahead_search"===Object(a.d)(e))];return n.concat(...s)}logSignupTiming(){const e=$.b.localStorage.getItem("signupTime");if(e){const t=Date.now()-e;t<S.s&&ge.default.logToServer(ge.default.SERVER_LOG_TYPE.SIGNUP_LOAD,ge.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),$.b.localStorage.removeItem("signupTime")}}mapInterestsForDisplay(e,t){const n=t.map(e=>({...e,is_followed:e.is_followed,label:e.name}));this.props.onSelectedInterestsChange(n.filter(e=>e.is_followed),!0);const s=new Set(e.map(e=>e.id)),o=n.filter(e=>!s.has(e.id));return e.concat(o)}preselectInterests(){const{numberToFollow:e,onSelectedInterestsChange:t}=this.props,{defaultInterests:n}=this.state,s=e||S.e;t(n.slice(0,s),!0)}contextualUpdateInterests(e){const{defaultInterests:t,defaultInterestsSet:n,addedContextualTopics:s}=this.state,o=[],r=[];let i=!1;t.forEach(t=>{if(o.push(t),n.add(t.id),e.has(t.id)&&!s.has(t.id)){const e=(t.contextual_interests||[]).filter(e=>!n.has(e.id));e.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?o.push(...e):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&r.push(...e),e.forEach(e=>{n.add(e.id)}),i=!0)}}),r.length>0&&o.push(...r),i&&this.setState({addedContextualTopics:new Set([...s,...e]),defaultInterests:o})}render(){const{handleBottomScroll:e,selectedInterests:t}=this.props,{numTopicsToShow:n}=this.state,o=this.getInterestsWithUpdatedIsFollowed();return Object(s.jsx)(_e,{disableScroll:!!n&&n<=5,handleBottomScroll:e,handleInterestClickFn:this.handleInterestClickFn,interests:n?o.slice(0,n):o,selectedInterests:t})}}var Se=Object(i.connect)(({mostRecentPin:e})=>({mostRecentPinImages:e&&e.plp_image_signatures?e.plp_image_signatures:[]}),()=>({}))(ye),ve=n("eBDd"),ke=n("DzJC"),Ce=n.n(ke),Ie=n("vvax");function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Te=Object(s.jsx)(u.e,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1))"}},height:20,left:!0,marginTop:-5,position:"absolute",right:!0,top:!0});class Pe extends o.Component{constructor(...e){super(...e),Ne(this,"state",{isBottom:!1}),Ne(this,"getButtonAttributes",()=>{const{hideFollowedInterests:e,isRenux:t,numberToFollow:n,selectedInterests:s}=this.props,{isBottom:o}=this.state,r=s.length,i=o&&r>=S.h?0:Math.max(0,n-r),a=c.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",i,"number of interests left to pick","number of interests left to pick"),l=t&&e?c.a._("Next","go to next step","go to next step"):Object(ve.a)(a,{numberLeftToFollow:""+i});return{text:i>0?l:c.a._("Done"),isDisabled:i>0}}),Ne(this,"handleBottomScroll",e=>this.setState({isBottom:e})),Ne(this,"handleBottomScrollThrottled",Ce()(this.handleBottomScroll,50)),Ne(this,"handleNextClick",()=>{const{isRenux:e,selectedInterests:t,followedInterests:n,setNuxPickerProgress:s,dispatchUpdateFollows:o,dispatchSubmitOrientationContext:r}=this.props;let i;if(e){const e=n.reduce((e,t)=>(e[t.id]=t.is_followed,e),{});i=Promise.resolve(o(e))}else{const e=[],n=[];t.forEach(t=>{e.push(t.id),n.push(t.log_data?t.log_data:null)});const s={interests:e.join(),log_data:JSON.stringify(n),referrer:"nux",user_behavior_data:Object(de.a)()};i=Promise.resolve(r(s))}i.then(()=>{e||s(S.a),Object(O.b)(101,{component:17,element:96,view:this.viewType,viewParameter:172}),this.logAndIncrementNuxStep(this.viewType,172)})}),Ne(this,"logAndIncrementNuxStep",(e,t)=>{Object(O.b)(8900,{view:e,viewParameter:t}),this.props.incrementNuxStep()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxPickerProgress:n}=this.props;t||n(S.r),this.viewType=t?213:24,e("topic"),Object(O.b)(13,{view:this.viewType,viewParameter:172})}render(){const{hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,onSelectedInterestsChange:o,personalizationCopy:{headerText:r,subHeaderText:i},preselect:a,selectedInterests:l,numberToFollow:d}=this.props,h=this.getButtonAttributes();return Object(s.jsxs)(u.e,{direction:"column",display:"flex",height:"100%",children:[Object(s.jsx)(u.e,{display:"visuallyHidden",role:"alert",children:Object(Ie.b)(c.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected","accessible label how many topics are selected"),{selectedTopicsCount:l.length})}),Object(s.jsxs)(u.e,{marginBottom:8,marginTop:t?8:4,paddingX:8,wrap:!0,children:[Object(s.jsx)(u.t,{align:"center",size:"md",children:r}),i&&Object(s.jsx)(u.e,{marginTop:2,children:Object(s.jsx)(u.U,{align:"center",children:i})})]}),Object(s.jsx)(Se,{handleBottomScroll:this.handleBottomScrollThrottled,hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,numberToFollow:d,onSelectedInterestsChange:o,preselect:a,selectedInterests:l}),Object(s.jsxs)(u.e,{position:"relative",children:[Te,Object(s.jsx)(u.e,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:8,paddingX:8,children:Object(s.jsx)(u.f,{color:"red",disabled:h.isDisabled,onClick:this.handleNextClick,size:"lg",text:h.text,type:"submit"})})]})]})}}var Le=Object(i.connect)(null,(function(e){return{dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),dispatchUpdateFollows:t=>e(Object(T.d)(t,"renux")),dispatchSubmitOrientationContext:t=>e(Object(T.b)(t)),setNuxPickerProgress:t=>e(Object(T.a)(S.n,t))}}))(Pe),Ee=n("FDmi");function Re({account:e,large:t,viewerId:n}){const{email:o,fullName:r,id:i,imageMediumUrl:a,username:c}=e;if(n===i)return null;const l=!(null==a?void 0:a.includes("static/images/user/default"));return Object(s.jsxs)(u.e,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%",children:[Object(s.jsx)(u.e,{paddingX:1,children:Object(s.jsx)(Ee.a,{accessibilityLabel:"",name:null!=r?r:c,src:l?a:"",size:t?"lg":"md"})}),Object(s.jsxs)(u.e,{marginStart:3,flex:"grow",children:[Object(s.jsx)(u.U,{color:"darkGray",truncate:!0,weight:"bold",children:r||c}),o&&Object(s.jsx)(u.U,{color:"darkGray",truncate:!0,children:o})]})]})}var Ae=n("0Bqi");var Ue=e=>{const t=Object.keys(e.accounts).length;return Object(s.jsxs)(u.e,{position:"relative",children:[Object(s.jsx)(u.e,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),Object(s.jsx)("ul",{children:Object.keys(e.accounts).map(t=>{const n=e.accounts[t];return Object(s.jsx)("li",{children:Object(s.jsx)(u.T,{onTap:()=>e.onClick(n),children:Object(s.jsx)("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"},children:Object(s.jsx)(Re,{account:n})})})},t)})})]})},Be=n("h4v/"),Ge=n("OCob"),De=n("kJuv"),Me=n("qD10"),ze=n("NdXn"),Fe=n("gC5q"),He=n("zRck"),qe=n("liz/");function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class We extends o.Component{constructor(...e){super(...e),Xe(this,"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),Xe(this,"handleAddAccount",()=>{Object(qe.i)("add_account_click",null,this.props.container),this.props.container===He.c&&this.props.showLogin?this.props.showLogin():this.setState({showLoginModal:!0})}),Xe(this,"trackProfileNavigateClick",e=>{Object(qe.i)(`current_profile_${e}_click`,null,this.props.container)}),Xe(this,"handleSwitch",e=>{const{container:t}=this.props;this.setState({isLoading:!0}),Object(O.b)(101,{component:13369,element:11196}),Object(qe.i)("switch_account_click",{destination_user_id:e.id},t);const n={get_user:!0,switch_account:e.id};Be.a.getInstance().pauseImpressionsAndFlush(),Object(De.a)(n,Object(Ge.a)(),{container:"account_switcher"},!0).then((n={})=>{if(n.resource_response&&n.resource_response.data&&n.resource_response.data.success){const n="/"+e.username;Object(qe.f)(n,e.id,t)}else Object(qe.e)(e.id,t),this.setState({failedAccount:e,isLoading:!1})},n=>{throw Object(qe.e)(e.id,t),this.setState({isLoading:!1}),n})}),Xe(this,"handleLinkedAccountSwitch",e=>{const{container:t,viewer:n}=this.props;if(this.setState({isLoading:!0}),Object(O.b)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),Be.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){const n={business_id:e.id,get_user:!0};Object(De.a)(n,Object(Ge.a)(),{container:"account_switcher"},!0).then((n={})=>{Object(qe.f)("/",e.id,t)},n=>{throw Object(qe.e)(e.id,t),this.setState({isLoading:!1}),n})}else w.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{Object(qe.h)(n.id),Object(qe.f)("/"+e.username,n.id,t)},e=>{throw Object(qe.e)(n.id,t),this.setState({isLoading:!1}),e})}),Xe(this,"handleCloseModal",()=>this.setState({showLoginModal:!1})),Xe(this,"handleReauthAccount",()=>{Object(qe.i)("switch_failure_prompt.login_click",null,this.props.container),this.setState({failedAccount:null,showLoginModal:!0})}),Xe(this,"handleRemoveUnauthAccount",e=>{Object(qe.i)("switch_failure_prompt.account_removed",{removed_user_id:e},this.props.container),Object(qe.h)(e),this.setState({failedAccount:null})}),Xe(this,"getBusinessAccounts",()=>{const{businessUser:e,viewer:{partner:t}}=this.props;if(!e.data)return null;return(t&&t.is_linked_business?e.data.owners:e.data.businesses).reduce((e,t)=>(e[t.id]=Object(Fe.a)(ze.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e),{})}),Xe(this,"renderAccounts",e=>Object.keys(e).map((t,n)=>Object(s.jsxs)("li",{children:[Object(s.jsx)(u.T,{onTap:()=>{this.handleSwitch(e[t])},children:Object(s.jsx)("div",{className:"AccountSwitcherListItem",style:{height:"auto"},children:Object(s.jsx)(Re,{large:!0,account:e[t],viewerId:this.props.viewer.id})})}),n!==qe.a-2&&Object(s.jsx)(u.o,{})]},n))),Xe(this,"renderPinnerButtons",e=>{const{onNavigateButtonClick:t}=this.props;return Object(s.jsx)(Me.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`,children:Object(s.jsx)(u.f,{text:c.a._("View profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:c.a._("Go to current profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}})})}),Xe(this,"renderBusinessButtons",e=>{const{onNavigateButtonClick:t}=this.props;return Object(s.jsxs)(u.e,{display:"flex",children:[Object(s.jsx)(u.e,{marginEnd:2,children:Object(s.jsx)(Me.a,{to:"/business/hub/",onClick:()=>{Object(O.b)(101,{element:11236}),t&&t()},children:Object(s.jsx)(u.f,{text:c.a._("Business hub","Link to Business hub from account switcher","Link to Business hub from account switcher"),accessibilityLabel:c.a._("Go to Business hub","Visit the Business hub for the current business user","Visit the Business hub for the current business user"),size:"sm",color:"red"},"biz-hub-button")})}),Object(s.jsx)(Me.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`,children:Object(s.jsx)(u.f,{text:c.a._("Profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:c.a._("Go to current user profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}})})]})})}componentDidMount(){this.props.container===He.c&&Object(qe.i)("modal.shown")}componentWillUnmount(){this.props.container===He.c&&Object(qe.i)("modal.dismiss")}renderLoadingIndicator(){return this.state.isLoading?Object(s.jsx)(te.a,{}):null}render(){const{viewer:{partner:e}}=this.props,{failedAccount:t,isLoading:n,showLoginModal:o}=this.state,r=Object(qe.d)(),i=this.getBusinessAccounts(),a=Object.keys(r).length,l=r[this.props.viewer.id];delete r[l.id];const d=l.imageLargeUrl&&!l.imageLargeUrl.includes("static/images/user/default");return Object(s.jsxs)(u.e,{flex:"grow",children:[o&&Object(s.jsx)(Ae.a,{container:this.props.container,onClose:this.handleCloseModal,email:t?t.email:""}),t?Object(s.jsxs)(u.e,{paddingX:4,paddingY:4,flex:"grow",children:[Object(s.jsx)(u.e,{marginBottom:3,children:Object(s.jsx)(u.U,{children:c.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it")})}),Object(s.jsx)(Re,{viewerId:l.id,account:t}),Object(s.jsx)(u.e,{marginTop:4,children:Object(s.jsx)(u.f,{text:c.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})}),Object(s.jsx)(u.e,{marginTop:3,children:Object(s.jsx)(u.f,{text:c.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:()=>this.handleRemoveUnauthAccount(t.id)})})]}):Object(s.jsxs)(u.e,{children:[n&&this.renderLoadingIndicator(),Object(s.jsxs)(u.e,{children:[Object(s.jsxs)(u.e,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}},children:[Object(s.jsx)(u.e,{marginEnd:4,children:Object(s.jsx)(Me.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${l.username}/`,children:Object(s.jsx)(u.T,{onTap:()=>this.trackProfileNavigateClick("avatar"),children:Object(s.jsx)(Ee.a,{name:l.fullName||l.username,size:"lg",src:d?l.imageLargeUrl:""})})})}),Object(s.jsxs)(u.e,{flex:"grow",children:[Object(s.jsxs)(u.e,{marginBottom:2,children:[Object(s.jsx)(u.U,{color:"darkGray",truncate:!0,weight:"bold",children:l.fullName||l.username}),l.email&&Object(s.jsx)(u.U,{color:"darkGray",truncate:!0,children:l.email})]}),e?this.renderBusinessButtons(l.username):this.renderPinnerButtons(l.username)]})]}),i?Object(s.jsx)(Ue,{accounts:i,onClick:this.handleLinkedAccountSwitch}):null,Object(s.jsx)(u.o,{}),e&&e.is_linked_business?null:Object(s.jsx)(u.e,{children:Object(s.jsx)("ul",{children:this.renderAccounts(r)})})]}),a<qe.a&&!(e&&e.is_linked_business)&&Object(s.jsx)(u.e,{paddingX:4,paddingY:3,children:Object(s.jsx)(u.f,{text:c.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:()=>this.handleAddAccount()})})]})]})}}var $e=Object(Y.compose)(K.e,Object(H.b)({key:"businessUser",name:"UserResource",options:({viewer:e})=>({field_set_key:"linked_partner",user_id:e.id})}))(We),Ve=n("v/Q4");function Ye({customTaglineText:e,hideAccountSwitchValueProp:t,onDismiss:n,showAddAccount:r}){const[i,a]=Object(o.useState)(Boolean(r)),l=Object(Ve.a)(),d=Object(H.a)({name:"UserResource",options:{username:l.isAuth?l.username:"",field_set_key:"linked_partner"}});Object(o.useEffect)(()=>{l.isAuth&&Object(qe.g)(l,d.data)},[]);return i?Object(s.jsx)(Ae.a,{container:He.c,onClose:r?n:()=>a(!1),customTaglineText:e,hideAccountSwitchValueProp:t}):Object(s.jsx)(u.e,{position:"relative",children:Object(s.jsx)(ne.b,{accessibilityModalLabel:c.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts","modal which allows user to add and switch multiple accounts"),size:"sm",heading:c.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),onDismiss:n,children:Object(s.jsx)($e,{container:He.c,onNavigateButtonClick:()=>n(),showLogin:()=>a(!0),viewer:l})})})}var Ke=n("yaUg"),Je=n("ihsa"),Qe=n("V08O");const Ze={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},et="DelightfulBubbles__",tt=["DelightfulBubbles__fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n","DelightfulBubbles__growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n","DelightfulBubbles__swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n",...Object.keys(Ze).map(e=>{const t=((e,t)=>{const n=e.length,s=e.indexOf(t)+1>=n?0:e.indexOf(t)+1;return e[s]})(Object.keys(Ze),e);return`${et}colorChange_${e} {\n      0% {\n        background-color: ${Ze[e]};\n      }\n      50% {\n        background-color: ${Ze[t]};\n      }\n    }\n    `})],nt=Object(Qe.a)(tt);function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ot=e=>{const{delay:t,diameter:n,height:o,initialColor:r,width:i,xOffset:a,yOffset:c}=e,l=((e,t,n,s,o,r,i,a)=>({bubblePositionStyles:{position:"absolute",marginLeft:r/2-o+"px",marginTop:n/2-o+"px",left:i+"px",top:a+"px"},bubbleSwirlStyles:{animation:`${et}swirl 6s ease-in-out ${e}s infinite forwards`,WebkitAnimation:`${et}swirl 6s ease-in-out ${e}s infinite forwards`},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:`${et}growShrink 6s ease-in-out ${e}s infinite alternate`,WebkitAnimation:`${et}growShrink 6s ease-in-out ${e}s infinite alternate`},bubbleShapeStyles:{height:t+"px",width:t+"px",borderRadius:"50%",backgroundColor:Ze[s],opacity:0,animation:`${et}colorChange_${s} 12s steps(1, start) ${e}s infinite forwards,\n      ${et}fadeIn 3s linear ${e}s 1 forwards`,WebkitAnimation:`${et}colorChange_${s} 12s steps(1, start) ${e}s infinite forwards,\n      ${et}fadeIn 3s linear ${e}s 1 forwards`}}))(t,n,o,r,Math.floor(n/2),i,a,c);return Object(s.jsx)(u.e,{dangerouslySetInlineStyle:{__style:l.bubblePositionStyles},children:Object(s.jsx)(u.e,{dangerouslySetInlineStyle:{__style:l.bubbleSwirlStyles},children:Object(s.jsx)(u.e,{dangerouslySetInlineStyle:{__style:l.bubbleGrowShrinkStyles},children:Object(s.jsx)(u.e,{dangerouslySetInlineStyle:{__style:l.bubbleShapeStyles}})})})})};class rt extends o.Component{constructor(...e){super(...e),st(this,"state",{isInitialized:!1})}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}shouldComponentUpdate(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}getSize(){const{width:e,height:t}=this.props;return void 0!==e&&void 0!==t?{width:e,height:t}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{height:void 0,width:void 0}}createBubbles(e,t){const{bubbleSize:n,delayFactor:o,delayOffset:r,numBubbles:i,xRadiusAdjustment:a,yRadiusAdjustment:c}=this.props,l=e+2*c,u=t+2*a,d=[],h=Object.keys(Ze);for(let p=0;p<i;p+=1){const i=n+Object(Qe.c)(-4,4),a=h[p%h.length],{x:c,y:g}=Object(Qe.b)(l,u);d.push(Object(s.jsx)(ot,{delay:p*o+r,diameter:i,initialColor:a,xOffset:c,yOffset:g,height:e,width:t},p))}return d}render(){const{height:e,width:t}=this.getSize();return Object(s.jsxs)(u.e,{height:e,width:t,position:"relative",children:[Object(s.jsx)(Je.a,{unsafeCSS:nt}),Object(s.jsxs)(u.e,{ref:e=>this.containerElement=e,children:[this.state.isInitialized&&this.createBubbles(e||0,t||0),Object(s.jsx)(u.e,{position:"relative",children:this.props.children})]})]})}}st(rt,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});var it=rt,at=n("/lhQ"),ct=n("EC51"),lt=n("28DW"),ut=n("0S8y");function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ht extends o.PureComponent{constructor(...e){super(...e),dt(this,"state",{name:this.props.firstName,showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),dt(this,"onNameChange",({value:e})=>{this.setState({name:e||"",showNoNameError:!e||Object(at.a)(e),showNameLengthError:!!e&&e.length>30})}),dt(this,"toggleNameInput",()=>{this.setState(({showNameLengthError:e,showNoNameError:t,showNameInput:n})=>({showNameInput:e||t||!n})),Object(O.b)(101,{element:136,view:24,viewParameter:259})}),dt(this,"continueAndSave",()=>{const{firstName:e,incrementNuxStep:t,setNuxNameProgress:n,updateNameInfo:s}=this.props,{name:o}=this.state;s(Object(ut.a)(o)).then(()=>{n(),Object(O.b)(101,{element:96,view:24,viewParameter:259,did_edit_name:e!==o}),Object(O.b)(8900,{view:24,viewParameter:259}),t()})}),dt(this,"getError",()=>{const{showNameLengthError:e,showNoNameError:t}=this.state;let n="";return t?n=c.a._("And your name is...?","Error flyout when user doesn't input name","Error flyout when user doesn't input name"):e&&(n=c.a._("Hmm, that's too long. Try a nickname instead?","nux.welcomeStep.nameLengthError","Name exceeds 30 character maximum error")),n}),dt(this,"handleHideAccountSwitcher",()=>this.setState({showAccountSwitchModal:!1})),dt(this,"handleNotYouClick",e=>{e.event.preventDefault(),Object(lt.a)("web.nux.click_login"),this.setState({showAccountSwitchModal:!0})})}componentDidMount(){this.props.dispatchSetNuxStepProgress("welcome"),Object(O.b)(13,{view:24,viewParameter:259})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t},userEmail:n}=this.props,{name:r,showAccountSwitchModal:i,showNameInput:a}=this.state,l=t.indexOf(" ",Math.round(t.length/2)),d=Object(Ke.a)(c.a._("{{ titleText }} {{ name }}!","nux.welcomeStep.greetingHeader","Greeting with inferred name."),{titleText:e,name:r}).replace(",",""),h=d.indexOf(r)-1,p=this.getError(),g=Object(s.jsxs)(u.e,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",overflow:"hidden",width:"100%",children:[Object(s.jsx)(u.x,{htmlFor:"name",children:Object(s.jsx)(u.e,{marginEnd:-1,marginStart:-1,marginTop:4,children:a?Object(s.jsx)(u.t,{align:"center",size:"md",children:e}):Object(s.jsxs)(o.Fragment,{children:[Object(s.jsx)(u.t,{align:"center",size:"md",children:d.substring(0,h)}),Object(s.jsxs)(u.e,{alignItems:"center",display:"flex",height:44,justifyContent:"center",marginTop:4,paddingY:1,children:[Object(s.jsx)(u.e,{maxWidth:"calc(100% - 80px)",marginStart:10,children:Object(s.jsx)(u.t,{align:"center",size:"md",truncate:!0,children:d.substring(h+1)})}),Object(s.jsx)(u.e,{"data-test-id":"nux-edit-name-btn",paddingX:1,children:Object(s.jsx)(u.v,{accessibilityLabel:c.a._("Edit Name","Botton that allows editing the user's name","Botton that allows editing the user's name"),bgColor:"transparent",icon:"edit",iconColor:"darkGray",onClick:this.toggleNameInput,size:"sm"})})]})]})})}),a&&Object(s.jsxs)(u.e,{alignItems:"start","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",marginTop:1,paddingY:1,children:[Object(s.jsx)(u.e,{width:"69%",children:Object(s.jsx)(u.W,{errorMessage:p,id:"name",onChange:this.onNameChange,placeholder:c.a._("name"),size:"lg",type:"text",value:r})}),Object(s.jsx)(u.e,{"data-test-id":"nux-update-name-btn",marginStart:2,children:Object(s.jsx)(u.f,{accessibilityLabel:c.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user"),color:"gray",inline:!0,onClick:this.toggleNameInput,size:"lg",text:c.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user")})})]})]});return Object(s.jsxs)(o.Fragment,{children:[i&&Object(s.jsx)(Ye,{customTaglineText:c.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account","Title on modal for users to log in to an existing account after they accidentally created a new account"),hideAccountSwitchValueProp:!0,onDismiss:this.handleHideAccountSwitcher,showAddAccount:!0}),Object(s.jsxs)(u.e,{direction:"column",display:"flex",height:"100%",minWidth:"100%",paddingX:8,paddingY:8,children:[Object(s.jsxs)(u.e,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",justifyContent:"start",width:"100%",children:[Object(s.jsx)(it,{delayOffset:-5,xRadiusAdjustment:40,children:Object(s.jsx)(u.e,{height:120,width:120,children:Object(s.jsx)(Ee.a,{name:r})})}),Object(s.jsx)(u.e,{alignItems:"center",marginTop:6,width:"100%",children:Object(s.jsx)(u.U,{align:"center",size:"lg",truncate:!0,children:n})}),Object(s.jsx)(u.e,{alignItems:"end",display:"flex",marginTop:2,width:"100%",children:g}),Object(s.jsx)(u.e,{marginTop:p?0:6,width:"100%",children:t.length>120?Object(s.jsx)(u.U,{align:"center",children:t}):Object(s.jsxs)(o.Fragment,{children:[Object(s.jsx)(u.U,{align:"center",children:t.substring(0,l)}),Object(s.jsx)(u.U,{align:"center",children:t.substring(l)})]})})]}),Object(s.jsx)(u.e,{"data-test-id":"nux_name_done_btn",marginTop:8,children:Object(s.jsx)(u.f,{accessibilityLabel:c.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:!!p,onClick:this.continueAndSave,size:"lg",text:c.a._("Next","next nux step button","next nux step button"),type:"button"})}),Object(s.jsx)(u.e,{marginBottom:5,marginTop:5,children:Object(s.jsxs)(u.T,{fullWidth:!1,onTap:this.handleNotYouClick,children:[Object(s.jsx)(u.U,{align:"center",size:"sm",children:c.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account","subtitle to ask users who create a new account if they meant to log in to an existing account")}),Object(s.jsx)(u.U,{align:"center",size:"sm",weight:"bold",children:Object(s.jsx)(ct.a,{href:"#",children:c.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account","Link allowing users who just created a new account the option to log in instead into an existing account")})})]})})]})]})}}var pt=Object(i.connect)(({viewer:e})=>({firstName:e.firstName?e.firstName:"",userEmail:e.isAuth?e.email:""}),e=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),updateNameInfo:t=>e(Object(T.e)({updateUserData:t})),setNuxNameProgress:()=>e(Object(T.a)(S.o,S.a))}))(ht),gt=n("r8eU");var bt=n("EC67");function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ft extends o.Component{constructor(...e){super(...e),mt(this,"state",{followedInterests:[],isLoading:!1,nuxStep:this.getNextStepIndex(-1,this.props.steps,!1),selectedInterests:[],userClickedBack:!1}),mt(this,"onComplete",()=>{const{handleComplete:e,isLandingPage:t,isRenux:n,dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:s}=this.props;Object(O.b)(4105,{view:n?213:24,viewParameter:171}),n||s(!0),e(),t&&this.handleNavigate("/")}),mt(this,"mounted",!1),mt(this,"handleNavigate",e=>{const{history:t}=this.props;t.push({pathname:e,state:{completedNux:!0}})}),mt(this,"handleSelectedInterestsChange",(e,t)=>{this.setState((n,s)=>{const o=this.getUpdatedSelectedInterests(n.selectedInterests,e,t),r=this.getUpdatedFollowInterests(n.followedInterests,e,t),{dispatchSetNuxSelectedInterestImages:i}=s;return i(o.reduce((e,t)=>{if(t&&t.images&&t.images["400x"]){const n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e},[])),{selectedInterests:o,followedInterests:r}})}),mt(this,"nuxSteps",{NuxWelcomeNameStep:pt,NuxGenderStep:z,NuxLocaleCountryStep:Z,NuxPicker:Le,NuxExtensionUpsell:E,NuxEducationLoader:C}),mt(this,"onPrevStepClickFn",e=>{const{steps:t,isRenux:n}=this.props,s=t[e].moduleName;return()=>{const t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,NuxPicker:172}[s];t&&Object(O.b)(101,{component:17,element:34,view:n?213:24,viewParameter:t}),e>0&&this.setState({nuxStep:e-1,userClickedBack:!0})}})}componentDidMount(){const{isRenux:e,isSimpleRenux:t,requestContext:{experiments:n}}=this.props;e&&!t&&(n.getWithActivation("web_renux_topic_two_step"),n.getWithActivation("web_renux_topic_two_step_row")),this.mounted=!0,Object(O.b)(4104,{view:e?213:24,viewParameter:170})}componentWillUnmount(){this.mounted=!1}getUpdatedFollowInterests(e,t,n){let s=[...e];return t.forEach(e=>{const t={...e,is_followed:n};let o=!1;s=s.map(e=>e.id===t.id?(o=!0,t):e),o||s.push(t)}),s}getUpdatedSelectedInterests(e,t,n){let s=[...e];return t.forEach(t=>{const o=Object(a.b)(s,t);n&&!o?s.push({...t,is_followed:n}):!n&&o&&(s=e.filter(e=>e.id!==t.id))}),s}getPickerSubHeaderText(){const{requestContext:e}=this.props,{group:t}=e.experiments.getWithActivation("web_nux_picker_subheader");return"variant_0"===t?c.a._("Pro tip: We use topics you pick here to build your home feed","nux.picker.subheader","message about what a topic is and why users should choose it "):"variant_1"===t?c.a._("We use the topics you pick to find ideas you like ","nux.picker.subheader","message about what a topic is and why users should choose it "):""}getPersonalizationCopy(e){const{hideFollowedInterests:t,isRenux:n,isSimpleRenux:s,requestContext:o,steps:r}=this.props;let i,a;const l=e.moduleName,u=r.map(e=>e.moduleName).indexOf(l)===r.length-2;switch(l){case"NuxWelcomeNameStep":return{headerText:c.a._("Welcome to Pinterest","greeting on welcome name step","greeting on welcome name step"),subHeaderText:c.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step","header on nux welcome and name editing step")};case"NuxGenderStep":return i=c.a._("How do you identify?","Header in NUX gender step.","Header in NUX gender step."),a="",n&&(i=c.a._("It’s time to refresh your feed!","Title on the modal asking user's gender","Title on the modal asking user's gender"),a=c.a._("How would you describe yourself?","Subtitle on the modal asking user's gender","Subtitle on the modal asking user's gender")),{headerText:i,subHeaderText:a};case"NuxLocaleCountryStep":return{headerText:c.a._("Pick your language and country/region","Header in NUX locale/country step","Header in NUX locale/country step")};case"NuxPicker":const e=s&&new gt.b(o,"web_topic_educator_lego").enabledWithNoActivation();return n&&t?(i=c.a._("What are you into these days?","Header in ReNUX topic picker step.","Header in ReNUX topic picker step."),a=c.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.","Subheader in ReNUX topic picker step.")):e?(i=c.a._("Which topics do you want to see more of?","nux.topicPicker.heading","Header in NUX topic picker step for topic education experience."),a=c.a._("Ideas you see in you home feed are based on topics you like","nux.topicPicker.subheading","Subheader in NUX topic picker step for topic education experience.")):(i=u?c.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."):c.a._("Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."),a=this.getPickerSubHeaderText()),{headerText:i,subHeaderText:a};case"NuxExtensionUpsell":return i=u?c.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."):c.a._("Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."),{headerText:i,subHeaderText:c.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step","Subheader in NUX browser extension upsell step")};default:return{}}}nuxStepToRender(e,t){const{hideFollowedInterests:n,isRenux:o,isSimpleRenux:r,requestContext:i}=this.props,{followedInterests:a,selectedInterests:c}=this.state,l=e.moduleName,u=this.nuxSteps[l],d=this.hasNuxStep("NuxGenderStep"),h=o&&n?S.p:S.d;return Object(s.jsx)(u,{...e.options,experiments:i.experiments,followedInterests:a,hasGenderStep:d,hideFollowedInterests:n,incrementNuxStep:this.incrementNuxStep(this.state.nuxStep),isRenux:o,isSimpleRenux:r,numberToFollow:h,onSelectedInterestsChange:this.handleSelectedInterestsChange,personalizationCopy:this.getPersonalizationCopy(e),requestContext:i,selectedInterests:c,showTableOfContents:t,toggleLoadingIndicator:e=>this.setState({isLoading:e})})}getNextStepIndex(e,t,n){const{isRenux:s}=this.props;let o=e+1;if(n)return o;if(!s)for(;o<t.length&&t[o].isCompleted;)o+=1;return o}incrementNuxStep(e){const{steps:t}=this.props,{userClickedBack:n}=this.state,s=this.getNextStepIndex(e,t,n);return s>=t.length?this.onComplete:()=>{(t=>{if(e!==t)this.setState({nuxStep:t})})(s)}}hasNuxStep(e){const{steps:t}=this.props;return t.some(t=>t.moduleName===e)}render(){const{handleDismiss:e,isLandingPage:t,isRenux:n,isSimpleRenux:o,steps:r}=this.props,{isLoading:i,nuxStep:a}=this.state,c=e=>["NuxEducationLoader"].includes(e),l=r.filter(e=>!c(e.moduleName)),u=c(r[a].moduleName)||t,d=n?!u&&!o&&a>0:!u&&!o&&a>1;return Object(s.jsx)(ue,{currentIndex:a,hideDots:n||o||u,isLoading:i,numSteps:l.length,onClose:u||!n&&!o?void 0:e,onPrevStepClick:d?this.onPrevStepClickFn(a):void 0,stepName:r[a].moduleName,children:this.nuxStepToRender(r[a],!u)})}}mt(ft,"defaultProps",{hideFollowedInterests:!1,isRenux:!1,isSimpleRenux:!1});t.a=Object(Y.compose)(Object(i.connect)(()=>({}),e=>({dispatchSetNuxSelectedInterestImages:t=>e(function(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}(t)),dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:t=>e(Object(T.c)(t))})),bt.k,K.e)(ft)},SCuf:function(e,t,n){n.d(t,"a",(function(){return i}));var s=n("nKUr"),o=(n("q1tI"),n("yweb")),r=n("n6mq");function i(){const e=Object(o.b)();return Object(s.jsx)(r.e,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(s.jsx)(r.O,{accessibilityLabel:e._("Loading signup form"),show:!0})})}},VL22:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var s=n("17x9"),o=n.n(s),r=n("kmwA");const i={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},a=e=>e.facebook_id?i.FACEBOOK:e.google_open_id_token?i.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?i.GOOGLE:e.email?i.EMAIL:i.OTHER,c=(o.a.shape({credentials:o.a.shape({}),userData:o.a.shape({}),type:o.a.oneOf(Object.values(i))}),(e="")=>e in r.a.settings.MINIMUM_AGE_BY_EU_COUNTRY),l=e=>r.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)||r.a.settings.LATAM_AGE_COLLECTION.has(e)},"YI5+":function(e,t,n){n.d(t,"a",(function(){return l}));var s=n("nKUr"),o=(n("q1tI"),n("Ye/N")),r=n("ihsa"),i=n("28DW"),a=n("n6mq");const c={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}};function l(e){const t=e=>{Object(i.a)("unauth.account_switcher_modal."+e)},{renderContent:n}=e;return Object(s.jsxs)("div",{style:c.mask,children:[Object(s.jsx)(r.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),Object(s.jsx)("div",{className:"AccountSwitcherModal",onClick:()=>{t("empty_space_click");const{onCloseClick:n}=e;n()},role:"dialog",style:c.scroller,children:Object(s.jsxs)("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:c.modalContainer,children:[n(),Object(s.jsx)("button",{"aria-label":o.a._("close","accessible label for close button","accessible label for close button"),onClick:()=>{t("close_button_click");const{onCloseClick:n}=e;n()},style:c.closeButton,children:Object(s.jsx)(a.u,{accessibilityLabel:o.a._("close","accessible label for close button","accessible label for close button"),color:"white",icon:"cancel",inline:!0})})]})})]})}},b7nI:function(e,t,n){var s=n("nKUr"),o=(n("q1tI"),n("yweb")),r=n("n6mq");const i=()=>{const e=Object(o.b)();return Object(s.jsx)(r.O,{accessibilityLabel:e._("Loading","Label for loading spinner","Label for loading spinner"),show:!0})};t.a=()=>Object(s.jsxs)(r.e,{children:[Object(s.jsx)(r.e,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,opacity:1,dangerouslySetInlineStyle:{__style:{zIndex:101}},children:Object(s.jsx)(i,{})}),Object(s.jsx)(r.e,{color:"white",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,opacity:.7,dangerouslySetInlineStyle:{__style:{zIndex:100}}})]})},bBqG:function(e,t,n){var s=n("IDoE"),o=n("ipvL"),r=n("zRck"),i=n("28DW"),a=n("7Cbv");t.a=(e,t,n)=>{let c=o.a.getGroupId();c||(c=(()=>{const e=Object(a.a)();return Object(i.g)("web_account_switcher.utils.group_created",{group_id:e,group_count:Object(s.a)()}),e})(),o.a.setGroupId(c));const l={group_id:c,group_count:Object(s.a)()};let u="";n&&(u=n===r.c?"modal.":"flyout."),Object(i.g)(`web_account_switcher.${u}${e}`,Object.assign({},t,l))}},dish:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var s=n("QLqj");const o=()=>s.b.localStorage.getItem("uoiou")||!1,r=e=>{s.b.localStorage.setItem("uoiou",!!e)}},ipvL:function(e,t,n){var s=n("0G5S"),o=n("zRck");const r=e=>"undefined"!=typeof window?Object(s.a)(e):null,i=(e,t)=>{"undefined"!=typeof window&&Object(s.c)(e,t)},a={getAccounts:()=>r(o.p),getAccountsJSON:()=>a.getAccounts()?JSON.parse(a.getAccounts()):{},getGroupId:()=>{const e=r(o.q);return e?JSON.parse(e):null},setAccounts:e=>i(o.p,e),setGroupId:e=>i(o.q,JSON.stringify(e))};t.a=a},kJuv:function(e,t,n){var s=n("eOdZ"),o=n("QLqj"),r=n("kmwA"),i=n("J8m7"),a=n("AXUD"),c=n("dish"),l=n("VL22"),u=n("OX7c"),d=n("28DW"),h=n("yM2L");const p=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?l.a.FACEBOOK:e.google_open_id_token?l.a.GOOGLE_ONE_TAP:e.gplus_id_token?l.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?l.a.EMAIL:l.a.OTHER},g=function(e,t,n=!1){let s="referrer_unknown";try{const e=document.referrer;s=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(l){}const o=p(e),r=t===Object(t)?t.hybridTier:"tier_unknown",i=t===Object(t)?t.container:"container_unknown";Object(d.a)("login.referrer."+s+"."+o),Object(d.a)("login.container."+i+"."+o),Object(d.a)("login.type."+o);const a=p(e)||"method_unknown",c=t.page||"page_unknown";e.gplus_autologin?n?(Object(d.a)("mweb_autologin.google_success"),Object(d.h)("new_mweb_autologin_google",{page:c,referrer:s,container:i,hybridTier:r})):(Object(d.a)("web_autologin_google"),Object(d.h)("new_web_autologin_google",{page:c,referrer:s,container:i,hybridTier:r})):e.facebook_autologin?(Object(d.a)("web_autologin_facebook"),Object(d.h)("new_web_autologin_facebook",{page:c,referrer:s,container:i,hybridTier:r})):(Object(d.a)(`web_login.${a}.success.${c}.${i}.${s}.${r}`),Object(d.h)(`new_web_login.${a}.success`,{page:c,referrer:s,container:i,hybridTier:r}))},b=(e,t)=>{Object(d.a)(`web_cross_domain_login.${e}.${p(t)}`)},m=(e,t,n="unknown_source",s=!1)=>{if(e){const o=e.http_status===a.b?a.b:e.api_error_code;let r=o;i.b.has(o)&&(r=i.b.get(o));const{container:c}=t;s?Object(d.a)(`unauth_web_client_cctld_login_api_error.${String(r)}.${c||"unknow_container"}.${n}`):Object(d.a)(`unauth_web_client_login_api_error.${String(r)}.${c||"unknow_container"}.${n}`)}};t.a=function(e,t,n={},i=!1,a,l,d=!1){if(function(e){return!e.mfa_resend&&!!e.username_or_email}(e)){if(-1!==r.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(t.origin))return function(e,t,n,s){b("attempt",e);const{referrer:o,facebookToken:r,unauthId:i}=s;return Object(h.loginUser)(e,{recaptchaV3Token:t,referrer:o,facebookToken:r,unauthId:i}).then(t=>{if(t&&t.data){b("success_with_token",e);const s=t.data;return Object(h.exchangeTokenAndSetSession)(s).then(t=>(b("success_token_exchanged",e),g(e,n),Promise.resolve()),t=>{throw b("success_token_not_exchanged",e),t})}throw b("success_without_token",e),new Error},t=>{throw b("failure",e),m(t,n,p(e),!0),t})}(e,l,n,t)}const f=i?null:o.b.localStorage.getItem("visitedPagesBeforeLogin"),x={...e,get_user:e.get_user||e.switch_account&&i,app_type_from_client:7===t.appType?7:5,visited_pages_before_login:f?JSON.stringify(f):null,recaptchaV2Token:a,recaptchaV3Token:l};return s.a.create("UserSessionResource",x).callCreate({showError:!1,async:!0}).then(t=>(g(e,n,d),Object(c.b)(!1),Object(u.a)("login").then(()=>t)),t=>(m(t,n,p(e)),Promise.reject(t)))}},"liz/":function(e,t,n){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return m}));var s=n("NwVv"),o=n("TPPM"),r=n("xGpI");n.d(t,"d",(function(){return r.a}));var i=n("ipvL"),a=n("bBqG");n.d(t,"i",(function(){return a.a}));var c=n("D2p8"),l=n("zRck"),u=n("IDoE");n.d(t,"c",(function(){return u.a}));n("+6dQ");const d=4,h=()=>({[l.p]:i.a.getAccountsJSON(),[l.q]:i.a.getGroupId()}),p=e=>{const t=i.a.getAccountsJSON();delete t[e],i.a.setAccounts(JSON.stringify(t))},g=(e,t)=>{if(!i.a.getAccounts()||e&&!(e.id in Object(r.a)())){if(e.partner&&e.partner.is_linked_business&&t)return void Object(s.a)({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});Object(s.a)(e)}},b=(e,t,n)=>{Object(a.a)("switch_account_success",{destination_user_id:t},n),Object(o.a)(e)},m=(e,t)=>{c.c.resume(c.a),Object(a.a)("switch_account_failure",{destination_user_id:e},t)}},vVbV:function(e,t,n){function s(e){return{type:"SET_NUX_PROGRESS",payload:{step:e}}}n.d(t,"a",(function(){return s}))},xGpI:function(e,t,n){var s=n("ipvL");t.a=()=>s.a.getAccountsJSON()},yM2L:function(e,t,n){n.r(t),n.d(t,"exchangeTokenAndSetSession",(function(){return u})),n.d(t,"verifyLoggedInStatus",(function(){return d})),n.d(t,"registerUser",(function(){return h})),n.d(t,"loginUser",(function(){return p}));var s=n("T0g9"),o=n("eOdZ"),r=n("kmwA"),i=n("28DW"),a=n("J8m7");const c=r.a.settings.ACCOUNTS_PINTEREST_URL,l=(e,t,n,s)=>{const o=e=>{const t=new Error(e.statusText);throw t.response=e,!t.api_error_code&&t.response&&(t.api_error_code=t.response.code,t.message=t.response.message),t},r={credentials:"include",mode:"cors"};return"POST"===n&&(r.method="POST",r.body=t,r.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":s},s||Object(i.a)("unauth.auth_handshake.cross_domain.no_unauth_id."+n)),fetch(e,r).then(e=>200===e.status||401===e.status?e:(o(e),{})).then(e=>e.json()).then(e=>"success"===e.status?Promise.resolve(e):e.code===a.r?(e.api_error_code=e.code,Promise.reject(e)):(o(e),{})).catch(e=>{throw e})},u=(e,t=!1)=>o.a.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate(),d=e=>{l(c+"/v3/handshake/verify/","","GET",e).then(e=>{if(e&&e.data){const t=e.data;u(t).then(e=>{window.location.reload()},e=>{})}},e=>{})},h=(e,{facebookToken:t,inviteCode:n,locale:o,referrer:i,unauthId:a})=>{const c=(e.business_name?"partner/handshake":(e.gplus_code||e.gplus_id_token)&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"email/handshake",u={};if(u.email=e.email||"",u.username=e.username||"",u.password=e.password||"",u.first_name=e.first_name||"",u.last_name=e.last_name||"",u.country=e.country||"",u.locale=o,u.referrer=i,e.age){const t=new Date;t.setFullYear(t.getFullYear()-e.age);const n=parseInt(t/1e3,10);u.birthday=n.toString()}if(e.custom_gender&&(u.custom_gender=e.custom_gender),e.gender&&(u.gender=e.gender),e.business_name&&(u.account_type=e.account_type,u.business_name=e.business_name,u.first_name=e.business_name),n&&(u.invite_code=n),e.facebook_id){const n=t||e.facebook_token||"";u.facebook_id=e.facebook_id,u.facebook_token=n,u.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(u.password=e.password||"",u.one_time_code=e.gplus_code,u.id_token=e.gplus_id_token,u.redirect_uri=e.gplus_redirect_uri);return e.recaptchaV3Token&&(u.recaptcha_v3_token=e.recaptchaV3Token),l(`${r.a.settings.ACCOUNTS_PINTEREST_URL}/v3/register/${c}/`,Object(s.a)(u),"POST",a)},p=(e,{facebookToken:t,recaptchaV3Token:n,referrer:o,unauthId:i})=>{const a=(e.mfa_token?"mfa/handshake":e.gplus_id_token&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"handshake",c={};if(e.username_or_email&&(c.username_or_email=e.username_or_email.trim(),c.password=e.password,c.referrer=o),e.facebook_id){const n=t||e.facebook_token||"";c.facebook_id=e.facebook_id,c.facebook_token=n,c.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(c.gplus_id_token=e.gplus_id_token,c.gplus_access_token=e.gplus_access_token,c.gplus_expires_at=e.gplus_expires_at,c.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(c.mfa_token=e.mfa_token),n&&(c.token=n),l(`${r.a.settings.ACCOUNTS_PINTEREST_URL}/v3/login/${a}/`,Object(s.a)(c),"POST",i)}},zRck:function(e,t,n){n.d(t,"p",(function(){return s})),n.d(t,"q",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"o",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"k",(function(){return g})),n.d(t,"j",(function(){return b})),n.d(t,"i",(function(){return m})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return x})),n.d(t,"n",(function(){return j}));const s="MULTIPLE_ACCOUNTS",o="MULTIPLE_ACCOUNTS_GROUP",r="account_switcher_flyout",i="account_switcher_modal",a="vmp_account_switcher_modal",c="account_recovery",l="board_invite",u="closeup",d="followbtn",h="flashlight_grid",p="google_one_tap_modal",g="inspired_banner",b="hybrid_clickthrough",m="hybrid_banner",f="pin_image",x="response_flyout",j="unauth_header"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/RenuxContainerCommon-dc60eeb5dda96bb547c3.mjs.map